<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mariOS: source/queue.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mariOS
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">mariOS Answers the Request for an Implementation of an OS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">queue.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation file of mariOS queue. It just contains implementation of function declared in the corresponding header file.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="queue_8h_source.html">queue.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for queue.c:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c__incl.png" border="0" usemap="#source_2queue_8c" alt=""/></div>
<map name="source_2queue_8c" id="source_2queue_8c">
<area shape="rect" id="node2" href="queue_8h.html" title="Header file of mariOS queue. This file contains some enum definitions (namely mariOS_queue_status_t, mariOS_blocking_queue_op_t and mariOS_queue_op_status_t ), the queue structure, which is exploited by queue accessory functions. " alt="" coords="72,80,131,107"/>
<area shape="rect" id="node3" href="mari_o_s__config_8h.html" title="This file contains definitions and macros intended to configure and modify some static parameters of ..." alt="" coords="5,229,101,256"/>
<area shape="rect" id="node5" href="mari_o_s_8h.html" title="Header file of main functionalities of mariOS. This file provides the mariOS task status enum..." alt="" coords="117,155,181,181"/>
<area shape="rect" id="node6" href="port_8h.html" title="This header file specifies functions that are needed to mariOS for being executed onto a specific arc..." alt="" coords="125,229,173,256"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acd6684134d243b3e027d3d490e0936ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="queue_8h.html#aff6e77e5eb7df3c39e46852e86dd458f">mariOS_queue</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#acd6684134d243b3e027d3d490e0936ba">createQueue</a> (unsigned int <a class="el" href="mari_o_s_8c.html#aaba88b24a21a6c70c895c0d55f4a69a0">size</a>)</td></tr>
<tr class="memdesc:acd6684134d243b3e027d3d490e0936ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">The function initialize a mariOS_queue structure with a specified size.  <a href="#acd6684134d243b3e027d3d490e0936ba">More...</a><br /></td></tr>
<tr class="separator:acd6684134d243b3e027d3d490e0936ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840bf7d51dbc4a52e7cfd3234c2475f1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032d">mariOS_queue_op_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#a840bf7d51dbc4a52e7cfd3234c2475f1">enqueue</a> (<a class="el" href="queue_8h.html#aff6e77e5eb7df3c39e46852e86dd458f">mariOS_queue</a> *queue, int8_t *msg, unsigned int msg_size, <a class="el" href="queue_8h.html#ae9a509b7a9a7c776d31c2e84252e553f">mariOS_blocking_queue_op_t</a> blocking)</td></tr>
<tr class="memdesc:a840bf7d51dbc4a52e7cfd3234c2475f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The enqueue function tries to put a message onto the specified \ queue. It takes in input a message and its size (in bytes) and enqueue the message if the queue is not locked for writing operation and if the queue has enough space to contain the message. Whenever these two conditions are not met, the behavior of the function depends on the value of  passed.  <a href="#a840bf7d51dbc4a52e7cfd3234c2475f1">More...</a><br /></td></tr>
<tr class="separator:a840bf7d51dbc4a52e7cfd3234c2475f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e97fa79cc3ad6c2235d99e99ef107ec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032d">mariOS_queue_op_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#a0e97fa79cc3ad6c2235d99e99ef107ec">dequeue</a> (<a class="el" href="queue_8h.html#aff6e77e5eb7df3c39e46852e86dd458f">mariOS_queue</a> *queue, int8_t *msg, unsigned int msg_size, <a class="el" href="queue_8h.html#ae9a509b7a9a7c776d31c2e84252e553f">mariOS_blocking_queue_op_t</a> blocking)</td></tr>
<tr class="memdesc:a0e97fa79cc3ad6c2235d99e99ef107ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">The dequeue function tries to pull a message from the specified queue. It takes in input the size of the message to read and the area on which store it. The message is read from the queue if it is not locked for reading operations and if the queue contains at least the amount of requested data. Whenever these two conditions are not met, the behavior of the function depends on the value of ::marios_blocking_queue_op_t passed.  <a href="#a0e97fa79cc3ad6c2235d99e99ef107ec">More...</a><br /></td></tr>
<tr class="separator:a0e97fa79cc3ad6c2235d99e99ef107ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4335c31b2e37a28463ef4acdc59602fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#a4335c31b2e37a28463ef4acdc59602fb">reset_queue</a> (<a class="el" href="queue_8h.html#aff6e77e5eb7df3c39e46852e86dd458f">mariOS_queue</a> *queue)</td></tr>
<tr class="memdesc:a4335c31b2e37a28463ef4acdc59602fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The function restore the queue in a pristine state.  <a href="#a4335c31b2e37a28463ef4acdc59602fb">More...</a><br /></td></tr>
<tr class="separator:a4335c31b2e37a28463ef4acdc59602fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation file of mariOS queue. It just contains implementation of function declared in the corresponding header file. </p>
<dl class="section author"><dt>Author</dt><dd>Mario Barbareschi <a href="#" onclick="location.href='mai'+'lto:'+'mar'+'io'+'.ba'+'rb'+'are'+'sc'+'hi@'+'un'+'ina'+'.i'+'t'; return false;">mario<span style="display: none;">.nosp@m.</span>.bar<span style="display: none;">.nosp@m.</span>bares<span style="display: none;">.nosp@m.</span>chi@<span style="display: none;">.nosp@m.</span>unina<span style="display: none;">.nosp@m.</span>.it</a> </dd></dl>
<dl class="section version"><dt>Version</dt><dd>V1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>11-July-2018 </dd></dl>
<dl class="section attention"><dt>Attention</dt><dd></dd></dl>
<p>Copyright (C) 2018 Mario Barbareschi</p>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more details.</p>
<p>You should have received a copy of the GNU Affero General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="acd6684134d243b3e027d3d490e0936ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd6684134d243b3e027d3d490e0936ba">&#9670;&nbsp;</a></span>createQueue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="queue_8h.html#aff6e77e5eb7df3c39e46852e86dd458f">mariOS_queue</a>* createQueue </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The function initialize a mariOS_queue structure with a specified size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>is the queue size in bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to the <a class="el" href="queue_8h.html#aff6e77e5eb7df3c39e46852e86dd458f" title="This struct is used to typedef the mariOS queue. It is a cyclic queue with pointers to the head and t...">mariOS_queue</a> created </dd></dl>
<p>we assume to create an unlocked queue</p>
<p><a class="el" href="queue_8c.html#a4335c31b2e37a28463ef4acdc59602fb" title="The function restore the queue in a pristine state. ">reset_queue()</a> is used to perform remaining initializations </p>

<p class="reference">References <a class="el" href="queue_8h.html#a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a">MARIOS_QUEUE_UNLOCKED</a>, <a class="el" href="structqueue__t.html#a5a3c1755403b9945be005f3301291b5b">queue_t::queueMemory</a>, <a class="el" href="queue_8c.html#a4335c31b2e37a28463ef4acdc59602fb">reset_queue()</a>, <a class="el" href="structqueue__t.html#aff5d379a9e52bb26c4518a37370e7636">queue_t::rLock</a>, <a class="el" href="mari_o_s_8c.html#aaba88b24a21a6c70c895c0d55f4a69a0">size</a>, <a class="el" href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">queue_t::size</a>, and <a class="el" href="structqueue__t.html#ac92c96e0bda532ea4f6d57ae11ab4a8e">queue_t::wLock</a>.</p>
<div class="fragment"><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;{</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        <a class="code" href="structqueue__t.html">mariOS_queue</a>* queue = (<a class="code" href="structqueue__t.html">mariOS_queue</a>*) malloc(<span class="keyword">sizeof</span>(<a class="code" href="structqueue__t.html">mariOS_queue</a>));</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        queue-&gt;<a class="code" href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">size</a> = <a class="code" href="mari_o_s_8c.html#aaba88b24a21a6c70c895c0d55f4a69a0">size</a>;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        queue-&gt;<a class="code" href="structqueue__t.html#a5a3c1755403b9945be005f3301291b5b">queueMemory</a> = malloc(<a class="code" href="mari_o_s_8c.html#aaba88b24a21a6c70c895c0d55f4a69a0">size</a>);</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        queue-&gt;<a class="code" href="structqueue__t.html#aff5d379a9e52bb26c4518a37370e7636">rLock</a> = <a class="code" href="queue_8h.html#a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a">MARIOS_QUEUE_UNLOCKED</a>; </div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        queue-&gt;<a class="code" href="structqueue__t.html#ac92c96e0bda532ea4f6d57ae11ab4a8e">wLock</a> = <a class="code" href="queue_8h.html#a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a">MARIOS_QUEUE_UNLOCKED</a>;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <a class="code" href="queue_8c.html#a4335c31b2e37a28463ef4acdc59602fb">reset_queue</a>(queue); </div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <span class="keywordflow">return</span> queue;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;}</div><div class="ttc" id="queue_8h_html_a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a"><div class="ttname"><a href="queue_8h.html#a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a">MARIOS_QUEUE_UNLOCKED</a></div><div class="ttdef"><b>Definition:</b> queue.h:51</div></div>
<div class="ttc" id="structqueue__t_html_a5a3c1755403b9945be005f3301291b5b"><div class="ttname"><a href="structqueue__t.html#a5a3c1755403b9945be005f3301291b5b">queue_t::queueMemory</a></div><div class="ttdeci">int8_t * queueMemory</div><div class="ttdef"><b>Definition:</b> queue.h:101</div></div>
<div class="ttc" id="queue_8c_html_a4335c31b2e37a28463ef4acdc59602fb"><div class="ttname"><a href="queue_8c.html#a4335c31b2e37a28463ef4acdc59602fb">reset_queue</a></div><div class="ttdeci">void reset_queue(mariOS_queue *queue)</div><div class="ttdoc">The function restore the queue in a pristine state. </div><div class="ttdef"><b>Definition:</b> queue.c:215</div></div>
<div class="ttc" id="structqueue__t_html_a0b109c1e636c7826326f780e0af75c8e"><div class="ttname"><a href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">queue_t::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdef"><b>Definition:</b> queue.h:99</div></div>
<div class="ttc" id="structqueue__t_html"><div class="ttname"><a href="structqueue__t.html">queue_t</a></div><div class="ttdoc">This struct is used to typedef the mariOS queue. It is a cyclic queue with pointers to the head and t...</div><div class="ttdef"><b>Definition:</b> queue.h:94</div></div>
<div class="ttc" id="structqueue__t_html_aff5d379a9e52bb26c4518a37370e7636"><div class="ttname"><a href="structqueue__t.html#aff5d379a9e52bb26c4518a37370e7636">queue_t::rLock</a></div><div class="ttdeci">volatile mariOS_queue_status_t rLock</div><div class="ttdef"><b>Definition:</b> queue.h:106</div></div>
<div class="ttc" id="mari_o_s_8c_html_aaba88b24a21a6c70c895c0d55f4a69a0"><div class="ttname"><a href="mari_o_s_8c.html#aaba88b24a21a6c70c895c0d55f4a69a0">size</a></div><div class="ttdeci">uint16_t size</div><div class="ttdef"><b>Definition:</b> mariOS.c:47</div></div>
<div class="ttc" id="structqueue__t_html_ac92c96e0bda532ea4f6d57ae11ab4a8e"><div class="ttname"><a href="structqueue__t.html#ac92c96e0bda532ea4f6d57ae11ab4a8e">queue_t::wLock</a></div><div class="ttdeci">volatile mariOS_queue_status_t wLock</div><div class="ttdef"><b>Definition:</b> queue.h:107</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_acd6684134d243b3e027d3d490e0936ba_cgraph.png" border="0" usemap="#queue_8c_acd6684134d243b3e027d3d490e0936ba_cgraph" alt=""/></div>
<map name="queue_8c_acd6684134d243b3e027d3d490e0936ba_cgraph" id="queue_8c_acd6684134d243b3e027d3d490e0936ba_cgraph">
<area shape="rect" id="node2" href="queue_8c.html#a4335c31b2e37a28463ef4acdc59602fb" title="The function restore the queue in a pristine state. " alt="" coords="133,5,211,32"/>
</map>
</div>

</div>
</div>
<a id="a0e97fa79cc3ad6c2235d99e99ef107ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e97fa79cc3ad6c2235d99e99ef107ec">&#9670;&nbsp;</a></span>dequeue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032d">mariOS_queue_op_status_t</a> dequeue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="queue_8h.html#aff6e77e5eb7df3c39e46852e86dd458f">mariOS_queue</a> *&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="queue_8h.html#ae9a509b7a9a7c776d31c2e84252e553f">mariOS_blocking_queue_op_t</a>&#160;</td>
          <td class="paramname"><em>blocking</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The dequeue function tries to pull a message from the specified queue. It takes in input the size of the message to read and the area on which store it. The message is read from the queue if it is not locked for reading operations and if the queue contains at least the amount of requested data. Whenever these two conditions are not met, the behavior of the function depends on the value of ::marios_blocking_queue_op_t passed. </p>
<p>If <a class="el" href="queue_8h.html#ae9a509b7a9a7c776d31c2e84252e553fa7acf364e5312f230d838e5558e7e9d23">MARIOS_BLOCKING_QUEUE_OP</a> is passed and the queue does not contain the message to dequeue, the function suspend the task that will be eventually resumed once the queue has been enqueued by another task. Otherwise, if the queue is just locked for reading operation, the task is simply preempted and will be eventually rescheduled.</p>
<p>If <a class="el" href="queue_8h.html#ae9a509b7a9a7c776d31c2e84252e553fad82f37cefe0c3f7d1c5b0ac99adca59c">MARIOS_NONBLOCKING_QUEUE_OP</a> is passed, the function will return error conditions related to the condition that impedes the dequeue. Indeed, two possible conditions may happen:</p><ul>
<li><a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032dadc4ad8fd19fab26af6288a312d52b5e7">MARIOS_QUEUE_BUSY_OP</a>, which indicates that the queue is blocked for reading operations.</li>
<li><a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032da908d91a5ae5f77cd259b059c2f0d2e47">MARIOS_QUEUE_EMPTY_OP</a>, which indicates that the queue does not contain requested message.</li>
</ul>
<p>Conversely, if the dequeue succeeds, no matter if blocking or not, the function returns <a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032da1119159d2fd835d28c1870ab6f594bbd">MARIOS_QUEUE_SUCCESS_OP</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">queue</td><td>is the mariOS_queue handler from which the message should be dequeued </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">msg</td><td>is the pointer on which the message will be stored </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>is the message size (in bytes) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">blocking</td><td>specifies if the dequeue is blocking or not </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>operation success or failure </dd></dl>
<p>the yield call has no effect since it is invoked inside a critical section! It will eventually have effect once the critical section ends.</p>
<p>Since we are executing a non-blocking dequeue, we return from this function signaling that the queue is empty (<a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032da908d91a5ae5f77cd259b059c2f0d2e47">MARIOS_QUEUE_EMPTY_OP</a>). Before returning, we must exit from the critical section as well as we must unlock the reading operations on the queue</p>
<p>the yield call has no effect since it is invoked inside a critical section! It will eventually have effect once the critical section ends.</p>
<p>Since we are executing a non-blocking dequeue, we return from this function signaling that the queue is busy (<a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032dadc4ad8fd19fab26af6288a312d52b5e7">MARIOS_QUEUE_BUSY_OP</a>). Before returning, we must exit from the critical section.</p>
<p>Reaching this point implies that the while loop terminates upon the condition receivedFlag != 0, meaning that we successfully dequeue a message</p>

<p class="reference">References <a class="el" href="port_8c.html#a22857ed9823f022f5988f9afdbb8994e">enter_critical_section()</a>, <a class="el" href="port_8c.html#a7c958c081c18f69c4e77d463d88dfc0d">exit_critical_sction()</a>, <a class="el" href="structqueue__t.html#ac6c2ff84f67a608cb66c1ea4f444b097">queue_t::freeMemory</a>, <a class="el" href="mari_o_s_8c.html#a203ea856aabbfe98ca3f54e1ce235ed5">get_current_task_id()</a>, <a class="el" href="queue_8h.html#ae9a509b7a9a7c776d31c2e84252e553fa7acf364e5312f230d838e5558e7e9d23">MARIOS_BLOCKING_QUEUE_OP</a>, <a class="el" href="mari_o_s__config_8h.html#af930526d08eb3382941b13342f41bf10">MARIOS_CONFIG_MAX_TASKS</a>, <a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032dadc4ad8fd19fab26af6288a312d52b5e7">MARIOS_QUEUE_BUSY_OP</a>, <a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032da908d91a5ae5f77cd259b059c2f0d2e47">MARIOS_QUEUE_EMPTY_OP</a>, <a class="el" href="queue_8h.html#a4385d73a50ac726301719a41792283f1a83519493888e56b0990dff2d46ab9127">MARIOS_QUEUE_LOCKED</a>, <a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032da1119159d2fd835d28c1870ab6f594bbd">MARIOS_QUEUE_SUCCESS_OP</a>, <a class="el" href="queue_8h.html#a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a">MARIOS_QUEUE_UNLOCKED</a>, <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a>, <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a216cb44922759fc8cc53a1f53c8b2ab6">MARIOS_TASK_STATUS_SUSPEND</a>, <a class="el" href="mari_o_s_8c.html#aa1ce5071a73faddfee5255c059bcde9f">mariOS_task_yield()</a>, <a class="el" href="structqueue__t.html#a5a3c1755403b9945be005f3301291b5b">queue_t::queueMemory</a>, <a class="el" href="structqueue__t.html#aff5d379a9e52bb26c4518a37370e7636">queue_t::rLock</a>, <a class="el" href="mari_o_s_8c.html#a9464bc26366c37895638a04f5b4d7e5e">set_current_task_status()</a>, <a class="el" href="mari_o_s_8c.html#adad61ada0d646fc5395c0a1e3dc50919">set_task_status()</a>, <a class="el" href="mari_o_s_8c.html#aaba88b24a21a6c70c895c0d55f4a69a0">size</a>, <a class="el" href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">queue_t::size</a>, <a class="el" href="structqueue__t.html#adf98f27497905236d9782e06747d89d6">queue_t::tail</a>, <a class="el" href="structqueue__t.html#a93aef13d250c24044e5c5642363adcc2">queue_t::tasks_waiting_to_receive</a>, <a class="el" href="structqueue__t.html#aa634f12fb1d05a0065b87cde43cc2c89">queue_t::tasks_waiting_to_send</a>, and <a class="el" href="structqueue__t.html#ac92c96e0bda532ea4f6d57ae11ab4a8e">queue_t::wLock</a>.</p>
<div class="fragment"><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;{</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordtype">int</span> receivedFlag = 0;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">while</span>(0 == receivedFlag) <span class="comment">//This flag will be set once the writing is achieved</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                <a class="code" href="port_8c.html#a22857ed9823f022f5988f9afdbb8994e">enter_critical_section</a>();</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                        <span class="keywordflow">if</span>(<a class="code" href="queue_8h.html#a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a">MARIOS_QUEUE_UNLOCKED</a> == queue-&gt;<a class="code" href="structqueue__t.html#aff5d379a9e52bb26c4518a37370e7636">rLock</a>)</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                        {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                                queue-&gt;<a class="code" href="structqueue__t.html#aff5d379a9e52bb26c4518a37370e7636">rLock</a> = <a class="code" href="queue_8h.html#a4385d73a50ac726301719a41792283f1a83519493888e56b0990dff2d46ab9127">MARIOS_QUEUE_LOCKED</a>;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                                <span class="keywordflow">if</span>(msg_size &gt; (queue-&gt;<a class="code" href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">size</a> - queue-&gt;<a class="code" href="structqueue__t.html#ac6c2ff84f67a608cb66c1ea4f444b097">freeMemory</a>)) <span class="comment">//Check whether the queue is containing at least one msg</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                                {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                                        <span class="keywordflow">if</span>(<a class="code" href="queue_8h.html#ae9a509b7a9a7c776d31c2e84252e553fa7acf364e5312f230d838e5558e7e9d23">MARIOS_BLOCKING_QUEUE_OP</a> == blocking)</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                                        {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                                                queue-&gt;<a class="code" href="structqueue__t.html#a93aef13d250c24044e5c5642363adcc2">tasks_waiting_to_receive</a>[<a class="code" href="mari_o_s_8c.html#a203ea856aabbfe98ca3f54e1ce235ed5">get_current_task_id</a>()] = 1;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                                                <a class="code" href="mari_o_s_8c.html#a9464bc26366c37895638a04f5b4d7e5e">set_current_task_status</a>(<a class="code" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a216cb44922759fc8cc53a1f53c8b2ab6">MARIOS_TASK_STATUS_SUSPEND</a>);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                                                <a class="code" href="mari_o_s_8c.html#aa1ce5071a73faddfee5255c059bcde9f">mariOS_task_yield</a>(); </div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                                        }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                                        <span class="keywordflow">else</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                                        {  </div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                                                queue-&gt;<a class="code" href="structqueue__t.html#ac92c96e0bda532ea4f6d57ae11ab4a8e">wLock</a> = <a class="code" href="queue_8h.html#a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a">MARIOS_QUEUE_UNLOCKED</a>;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                                                <a class="code" href="port_8c.html#a7c958c081c18f69c4e77d463d88dfc0d">exit_critical_sction</a>();</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                                                <span class="keywordflow">return</span> <a class="code" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032da908d91a5ae5f77cd259b059c2f0d2e47">MARIOS_QUEUE_EMPTY_OP</a>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                                        }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                                }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                                <span class="keywordflow">else</span> <span class="comment">//There is at least one msg</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                                {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                                        <span class="keywordflow">if</span>(queue-&gt;<a class="code" href="structqueue__t.html#adf98f27497905236d9782e06747d89d6">tail</a>+msg_size &lt;= queue-&gt;<a class="code" href="mari_o_s_8c.html#aaba88b24a21a6c70c895c0d55f4a69a0">size</a>) <span class="comment">//If the message is stored along the queue</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                                        {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                                                memcpy(msg, queue-&gt;<a class="code" href="structqueue__t.html#a5a3c1755403b9945be005f3301291b5b">queueMemory</a>+queue-&gt;<a class="code" href="structqueue__t.html#adf98f27497905236d9782e06747d89d6">tail</a>,msg_size);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                                                queue-&gt;<a class="code" href="structqueue__t.html#adf98f27497905236d9782e06747d89d6">tail</a> += msg_size;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                                        }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                                        <span class="keywordflow">else</span> <span class="comment">//We need to split the copy</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                                        {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                                memcpy(msg, queue-&gt;<a class="code" href="structqueue__t.html#a5a3c1755403b9945be005f3301291b5b">queueMemory</a>+queue-&gt;<a class="code" href="structqueue__t.html#adf98f27497905236d9782e06747d89d6">tail</a>, queue-&gt;<a class="code" href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">size</a>-queue-&gt;<a class="code" href="structqueue__t.html#adf98f27497905236d9782e06747d89d6">tail</a>);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                                                memcpy(msg+queue-&gt;<a class="code" href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">size</a>-queue-&gt;<a class="code" href="structqueue__t.html#adf98f27497905236d9782e06747d89d6">tail</a>, queue-&gt;<a class="code" href="structqueue__t.html#a5a3c1755403b9945be005f3301291b5b">queueMemory</a>, msg_size-(queue-&gt;<a class="code" href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">size</a>-queue-&gt;<a class="code" href="structqueue__t.html#adf98f27497905236d9782e06747d89d6">tail</a>));</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                                                queue-&gt;<a class="code" href="structqueue__t.html#adf98f27497905236d9782e06747d89d6">tail</a> = msg_size-(queue-&gt;<a class="code" href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">size</a>-queue-&gt;<a class="code" href="structqueue__t.html#adf98f27497905236d9782e06747d89d6">tail</a>); <span class="comment">//The tail just point to the next non-free region</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                                        }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                                        queue-&gt;<a class="code" href="structqueue__t.html#ac6c2ff84f67a608cb66c1ea4f444b097">freeMemory</a> += msg_size;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                                        <span class="comment">//Let&#39;s make awaken suspended tasks</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                                        <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                                        <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code" href="mari_o_s__config_8h.html#af930526d08eb3382941b13342f41bf10">MARIOS_CONFIG_MAX_TASKS</a>; i++)</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                                                <span class="keywordflow">if</span>(1 == queue-&gt;<a class="code" href="structqueue__t.html#aa634f12fb1d05a0065b87cde43cc2c89">tasks_waiting_to_send</a>[i])</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                                {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                                                        <a class="code" href="mari_o_s_8c.html#adad61ada0d646fc5395c0a1e3dc50919">set_task_status</a>(i, <a class="code" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a>);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                                                        queue-&gt;<a class="code" href="structqueue__t.html#aa634f12fb1d05a0065b87cde43cc2c89">tasks_waiting_to_send</a>[i] = 0;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                                }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                                        receivedFlag = 1;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                                }</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                                queue-&gt;<a class="code" href="structqueue__t.html#aff5d379a9e52bb26c4518a37370e7636">rLock</a> = <a class="code" href="queue_8h.html#a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a">MARIOS_QUEUE_UNLOCKED</a>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                        }</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                        <span class="keywordflow">else</span> <span class="comment">//The queue is just locked for receiving</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                        {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                                <span class="keywordflow">if</span>(<a class="code" href="queue_8h.html#ae9a509b7a9a7c776d31c2e84252e553fa7acf364e5312f230d838e5558e7e9d23">MARIOS_BLOCKING_QUEUE_OP</a> == blocking)</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                                {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                        <a class="code" href="mari_o_s_8c.html#aa1ce5071a73faddfee5255c059bcde9f">mariOS_task_yield</a>();    </div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                                }</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                                <span class="keywordflow">else</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                                {  </div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                                        <a class="code" href="port_8c.html#a7c958c081c18f69c4e77d463d88dfc0d">exit_critical_sction</a>();</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                                        <span class="keywordflow">return</span> <a class="code" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032dadc4ad8fd19fab26af6288a312d52b5e7">MARIOS_QUEUE_BUSY_OP</a>;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                                }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                        }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                <a class="code" href="port_8c.html#a7c958c081c18f69c4e77d463d88dfc0d">exit_critical_sction</a>();</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032da1119159d2fd835d28c1870ab6f594bbd">MARIOS_QUEUE_SUCCESS_OP</a>;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;}</div><div class="ttc" id="queue_8h_html_aef20e5d045b502d6959489d3e82a032da908d91a5ae5f77cd259b059c2f0d2e47"><div class="ttname"><a href="queue_8h.html#aef20e5d045b502d6959489d3e82a032da908d91a5ae5f77cd259b059c2f0d2e47">MARIOS_QUEUE_EMPTY_OP</a></div><div class="ttdef"><b>Definition:</b> queue.h:85</div></div>
<div class="ttc" id="structqueue__t_html_aa634f12fb1d05a0065b87cde43cc2c89"><div class="ttname"><a href="structqueue__t.html#aa634f12fb1d05a0065b87cde43cc2c89">queue_t::tasks_waiting_to_send</a></div><div class="ttdeci">uint8_t tasks_waiting_to_send[MARIOS_CONFIG_MAX_TASKS]</div><div class="ttdef"><b>Definition:</b> queue.h:103</div></div>
<div class="ttc" id="queue_8h_html_a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a"><div class="ttname"><a href="queue_8h.html#a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a">MARIOS_QUEUE_UNLOCKED</a></div><div class="ttdef"><b>Definition:</b> queue.h:51</div></div>
<div class="ttc" id="mari_o_s_8c_html_aa1ce5071a73faddfee5255c059bcde9f"><div class="ttname"><a href="mari_o_s_8c.html#aa1ce5071a73faddfee5255c059bcde9f">mariOS_task_yield</a></div><div class="ttdeci">void mariOS_task_yield(void)</div><div class="ttdoc">This function implements the task yield, hence it gives to a task the possibility of a self-preemptio...</div><div class="ttdef"><b>Definition:</b> mariOS.c:159</div></div>
<div class="ttc" id="structqueue__t_html_a5a3c1755403b9945be005f3301291b5b"><div class="ttname"><a href="structqueue__t.html#a5a3c1755403b9945be005f3301291b5b">queue_t::queueMemory</a></div><div class="ttdeci">int8_t * queueMemory</div><div class="ttdef"><b>Definition:</b> queue.h:101</div></div>
<div class="ttc" id="queue_8h_html_ae9a509b7a9a7c776d31c2e84252e553fa7acf364e5312f230d838e5558e7e9d23"><div class="ttname"><a href="queue_8h.html#ae9a509b7a9a7c776d31c2e84252e553fa7acf364e5312f230d838e5558e7e9d23">MARIOS_BLOCKING_QUEUE_OP</a></div><div class="ttdef"><b>Definition:</b> queue.h:63</div></div>
<div class="ttc" id="structqueue__t_html_adf98f27497905236d9782e06747d89d6"><div class="ttname"><a href="structqueue__t.html#adf98f27497905236d9782e06747d89d6">queue_t::tail</a></div><div class="ttdeci">volatile uint32_t tail</div><div class="ttdef"><b>Definition:</b> queue.h:97</div></div>
<div class="ttc" id="mari_o_s_8c_html_adad61ada0d646fc5395c0a1e3dc50919"><div class="ttname"><a href="mari_o_s_8c.html#adad61ada0d646fc5395c0a1e3dc50919">set_task_status</a></div><div class="ttdeci">void set_task_status(mariOS_task_id_t task_id, mariOS_task_status_t status)</div><div class="ttdoc">This accessory function configure the status of the a task. </div><div class="ttdef"><b>Definition:</b> mariOS.c:227</div></div>
<div class="ttc" id="mari_o_s_8h_html_a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee"><div class="ttname"><a href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a></div><div class="ttdef"><b>Definition:</b> mariOS.h:68</div></div>
<div class="ttc" id="port_8c_html_a22857ed9823f022f5988f9afdbb8994e"><div class="ttname"><a href="port_8c.html#a22857ed9823f022f5988f9afdbb8994e">enter_critical_section</a></div><div class="ttdeci">void enter_critical_section()</div><div class="ttdoc">The function enter_critical_section must guarantee that no other task can access shared resources of ...</div><div class="ttdef"><b>Definition:</b> port.c:153</div></div>
<div class="ttc" id="structqueue__t_html_a0b109c1e636c7826326f780e0af75c8e"><div class="ttname"><a href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">queue_t::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdef"><b>Definition:</b> queue.h:99</div></div>
<div class="ttc" id="queue_8h_html_aef20e5d045b502d6959489d3e82a032dadc4ad8fd19fab26af6288a312d52b5e7"><div class="ttname"><a href="queue_8h.html#aef20e5d045b502d6959489d3e82a032dadc4ad8fd19fab26af6288a312d52b5e7">MARIOS_QUEUE_BUSY_OP</a></div><div class="ttdef"><b>Definition:</b> queue.h:83</div></div>
<div class="ttc" id="mari_o_s_8h_html_a2d398ecdf64ae2d69b62a370306d7e24a216cb44922759fc8cc53a1f53c8b2ab6"><div class="ttname"><a href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a216cb44922759fc8cc53a1f53c8b2ab6">MARIOS_TASK_STATUS_SUSPEND</a></div><div class="ttdef"><b>Definition:</b> mariOS.h:71</div></div>
<div class="ttc" id="structqueue__t_html_aff5d379a9e52bb26c4518a37370e7636"><div class="ttname"><a href="structqueue__t.html#aff5d379a9e52bb26c4518a37370e7636">queue_t::rLock</a></div><div class="ttdeci">volatile mariOS_queue_status_t rLock</div><div class="ttdef"><b>Definition:</b> queue.h:106</div></div>
<div class="ttc" id="mari_o_s__config_8h_html_af930526d08eb3382941b13342f41bf10"><div class="ttname"><a href="mari_o_s__config_8h.html#af930526d08eb3382941b13342f41bf10">MARIOS_CONFIG_MAX_TASKS</a></div><div class="ttdeci">#define MARIOS_CONFIG_MAX_TASKS</div><div class="ttdef"><b>Definition:</b> mariOS_config.h:36</div></div>
<div class="ttc" id="port_8c_html_a7c958c081c18f69c4e77d463d88dfc0d"><div class="ttname"><a href="port_8c.html#a7c958c081c18f69c4e77d463d88dfc0d">exit_critical_sction</a></div><div class="ttdeci">void exit_critical_sction()</div><div class="ttdoc">The function exit_critical_sction guarantees that the current task can be preempt by the scheduler in...</div><div class="ttdef"><b>Definition:</b> port.c:157</div></div>
<div class="ttc" id="structqueue__t_html_a93aef13d250c24044e5c5642363adcc2"><div class="ttname"><a href="structqueue__t.html#a93aef13d250c24044e5c5642363adcc2">queue_t::tasks_waiting_to_receive</a></div><div class="ttdeci">uint8_t tasks_waiting_to_receive[MARIOS_CONFIG_MAX_TASKS]</div><div class="ttdef"><b>Definition:</b> queue.h:104</div></div>
<div class="ttc" id="queue_8h_html_aef20e5d045b502d6959489d3e82a032da1119159d2fd835d28c1870ab6f594bbd"><div class="ttname"><a href="queue_8h.html#aef20e5d045b502d6959489d3e82a032da1119159d2fd835d28c1870ab6f594bbd">MARIOS_QUEUE_SUCCESS_OP</a></div><div class="ttdef"><b>Definition:</b> queue.h:82</div></div>
<div class="ttc" id="mari_o_s_8c_html_aaba88b24a21a6c70c895c0d55f4a69a0"><div class="ttname"><a href="mari_o_s_8c.html#aaba88b24a21a6c70c895c0d55f4a69a0">size</a></div><div class="ttdeci">uint16_t size</div><div class="ttdef"><b>Definition:</b> mariOS.c:47</div></div>
<div class="ttc" id="queue_8h_html_a4385d73a50ac726301719a41792283f1a83519493888e56b0990dff2d46ab9127"><div class="ttname"><a href="queue_8h.html#a4385d73a50ac726301719a41792283f1a83519493888e56b0990dff2d46ab9127">MARIOS_QUEUE_LOCKED</a></div><div class="ttdef"><b>Definition:</b> queue.h:50</div></div>
<div class="ttc" id="structqueue__t_html_ac6c2ff84f67a608cb66c1ea4f444b097"><div class="ttname"><a href="structqueue__t.html#ac6c2ff84f67a608cb66c1ea4f444b097">queue_t::freeMemory</a></div><div class="ttdeci">uint32_t freeMemory</div><div class="ttdef"><b>Definition:</b> queue.h:100</div></div>
<div class="ttc" id="mari_o_s_8c_html_a9464bc26366c37895638a04f5b4d7e5e"><div class="ttname"><a href="mari_o_s_8c.html#a9464bc26366c37895638a04f5b4d7e5e">set_current_task_status</a></div><div class="ttdeci">void set_current_task_status(mariOS_task_status_t status)</div><div class="ttdoc">This accessory function configure the status of the current active task. </div><div class="ttdef"><b>Definition:</b> mariOS.c:222</div></div>
<div class="ttc" id="structqueue__t_html_ac92c96e0bda532ea4f6d57ae11ab4a8e"><div class="ttname"><a href="structqueue__t.html#ac92c96e0bda532ea4f6d57ae11ab4a8e">queue_t::wLock</a></div><div class="ttdeci">volatile mariOS_queue_status_t wLock</div><div class="ttdef"><b>Definition:</b> queue.h:107</div></div>
<div class="ttc" id="mari_o_s_8c_html_a203ea856aabbfe98ca3f54e1ce235ed5"><div class="ttname"><a href="mari_o_s_8c.html#a203ea856aabbfe98ca3f54e1ce235ed5">get_current_task_id</a></div><div class="ttdeci">mariOS_task_id_t get_current_task_id(void)</div><div class="ttdoc">This accessory function returns the mariOS_task_id of the current active task. </div><div class="ttdef"><b>Definition:</b> mariOS.c:217</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_a0e97fa79cc3ad6c2235d99e99ef107ec_cgraph.png" border="0" usemap="#queue_8c_a0e97fa79cc3ad6c2235d99e99ef107ec_cgraph" alt=""/></div>
<map name="queue_8c_a0e97fa79cc3ad6c2235d99e99ef107ec_cgraph" id="queue_8c_a0e97fa79cc3ad6c2235d99e99ef107ec_cgraph">
<area shape="rect" id="node2" href="port_8c.html#a22857ed9823f022f5988f9afdbb8994e" title="The function enter_critical_section must guarantee that no other task can access shared resources of ..." alt="" coords="121,5,237,32"/>
<area shape="rect" id="node3" href="port_8c.html#a7c958c081c18f69c4e77d463d88dfc0d" title="The function exit_critical_sction guarantees that the current task can be preempt by the scheduler in..." alt="" coords="127,56,230,83"/>
<area shape="rect" id="node4" href="mari_o_s_8c.html#a203ea856aabbfe98ca3f54e1ce235ed5" title="This accessory function returns the mariOS_task_id of the current active task. " alt="" coords="124,107,233,133"/>
<area shape="rect" id="node5" href="mari_o_s_8c.html#aa1ce5071a73faddfee5255c059bcde9f" title="This function implements the task yield, hence it gives to a task the possibility of a self&#45;preemptio..." alt="" coords="126,157,231,184"/>
<area shape="rect" id="node8" href="mari_o_s_8c.html#a9464bc26366c37895638a04f5b4d7e5e" title="This accessory function configure the status of the current active task. " alt="" coords="115,208,243,235"/>
<area shape="rect" id="node9" href="mari_o_s_8c.html#adad61ada0d646fc5395c0a1e3dc50919" title="This accessory function configure the status of the a task. " alt="" coords="297,245,389,272"/>
<area shape="rect" id="node6" href="mari_o_s_8c.html#ab7b836592c7610e95c89ae7989b63d63" title="This function implements the mariOS&#39;s scheduler. The main aim is to get the current active task statu..." alt="" coords="291,132,396,159"/>
<area shape="rect" id="node7" href="port_8c.html#a58c8b2ad0ea491a6642e5e1cbd358c89" title="Whenever the scheduler wants to remove the current task in favor of another task, it can explicitly c..." alt="" coords="322,183,365,209"/>
</map>
</div>

</div>
</div>
<a id="a840bf7d51dbc4a52e7cfd3234c2475f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840bf7d51dbc4a52e7cfd3234c2475f1">&#9670;&nbsp;</a></span>enqueue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032d">mariOS_queue_op_status_t</a> enqueue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="queue_8h.html#aff6e77e5eb7df3c39e46852e86dd458f">mariOS_queue</a> *&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="queue_8h.html#ae9a509b7a9a7c776d31c2e84252e553f">mariOS_blocking_queue_op_t</a>&#160;</td>
          <td class="paramname"><em>blocking</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The enqueue function tries to put a message onto the specified \ queue. It takes in input a message and its size (in bytes) and enqueue the message if the queue is not locked for writing operation and if the queue has enough space to contain the message. Whenever these two conditions are not met, the behavior of the function depends on the value of  passed. </p>
<p>If <a class="el" href="queue_8h.html#ae9a509b7a9a7c776d31c2e84252e553fa7acf364e5312f230d838e5558e7e9d23">MARIOS_BLOCKING_QUEUE_OP</a> is passed and the queue cannot contain the whole message to enqueue, the function suspend the task that will be eventually resumed once the queue has been dequeued by another task. Otherwise, if the queue is just locked for writing operation, the task is simply preempted and will be eventually rescheduled.</p>
<p>If <a class="el" href="queue_8h.html#ae9a509b7a9a7c776d31c2e84252e553fad82f37cefe0c3f7d1c5b0ac99adca59c">MARIOS_NONBLOCKING_QUEUE_OP</a> is passed, the function will return error conditions related to the condition that impedes the enqueue. Indeed, two possible conditions may happen:</p><ul>
<li><a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032dadc4ad8fd19fab26af6288a312d52b5e7">MARIOS_QUEUE_BUSY_OP</a>, which indicates that the queue is blocked for writing operations.</li>
<li><a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032da3f8b7b8bec033117b660862a40639384">MARIOS_QUEUE_FULL_OP</a>, which indicates that the queue cannot contain the whole message.</li>
</ul>
<p>Conversely, if the enqueue succeeds, no matter if blocking or not, the function returns <a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032da1119159d2fd835d28c1870ab6f594bbd">MARIOS_QUEUE_SUCCESS_OP</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">queue</td><td>is the mariOS_queue handler on which the message should be enqueued </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>is the pointer to the message that has to be enqueued </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>is the message size (in bytes) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">blocking</td><td>specifies if the enqueue is blocking or not </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>operation success or failure </dd></dl>
<p>the yield call has no effect since it is invoked inside a critical section! It will eventually have effect once the critical section ends.</p>
<p>Since we are executing a non-blocking enqueue, we return from this function signaling that the queue is full (<a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032da3f8b7b8bec033117b660862a40639384">MARIOS_QUEUE_FULL_OP</a>). Before returning, we must exit from the critical section as well as we must unlock the writing operations on the queue</p>
<p>The yield call has no effect since it is invoked inside a critical section! It will eventually have effect once the critical section ends.</p>
<p>Since we are executing a non-blocking enqueue, we return from this function signaling that the queue is busy (<a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032dadc4ad8fd19fab26af6288a312d52b5e7">MARIOS_QUEUE_BUSY_OP</a>). Before returning, we must exit from the critical section</p>
<p>Reaching this point implies that the while loop terminates upon the condition writtenFlag != 0, meaning that we successfully enqueued a message</p>

<p class="reference">References <a class="el" href="port_8c.html#a22857ed9823f022f5988f9afdbb8994e">enter_critical_section()</a>, <a class="el" href="port_8c.html#a7c958c081c18f69c4e77d463d88dfc0d">exit_critical_sction()</a>, <a class="el" href="structqueue__t.html#ac6c2ff84f67a608cb66c1ea4f444b097">queue_t::freeMemory</a>, <a class="el" href="mari_o_s_8c.html#a203ea856aabbfe98ca3f54e1ce235ed5">get_current_task_id()</a>, <a class="el" href="structqueue__t.html#a8fbdf5acdb9fc2aa62042037ebce4c5d">queue_t::head</a>, <a class="el" href="queue_8h.html#ae9a509b7a9a7c776d31c2e84252e553fa7acf364e5312f230d838e5558e7e9d23">MARIOS_BLOCKING_QUEUE_OP</a>, <a class="el" href="mari_o_s__config_8h.html#af930526d08eb3382941b13342f41bf10">MARIOS_CONFIG_MAX_TASKS</a>, <a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032dadc4ad8fd19fab26af6288a312d52b5e7">MARIOS_QUEUE_BUSY_OP</a>, <a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032da3f8b7b8bec033117b660862a40639384">MARIOS_QUEUE_FULL_OP</a>, <a class="el" href="queue_8h.html#a4385d73a50ac726301719a41792283f1a83519493888e56b0990dff2d46ab9127">MARIOS_QUEUE_LOCKED</a>, <a class="el" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032da1119159d2fd835d28c1870ab6f594bbd">MARIOS_QUEUE_SUCCESS_OP</a>, <a class="el" href="queue_8h.html#a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a">MARIOS_QUEUE_UNLOCKED</a>, <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a>, <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a216cb44922759fc8cc53a1f53c8b2ab6">MARIOS_TASK_STATUS_SUSPEND</a>, <a class="el" href="mari_o_s_8c.html#aa1ce5071a73faddfee5255c059bcde9f">mariOS_task_yield()</a>, <a class="el" href="structqueue__t.html#a5a3c1755403b9945be005f3301291b5b">queue_t::queueMemory</a>, <a class="el" href="mari_o_s_8c.html#a9464bc26366c37895638a04f5b4d7e5e">set_current_task_status()</a>, <a class="el" href="mari_o_s_8c.html#adad61ada0d646fc5395c0a1e3dc50919">set_task_status()</a>, <a class="el" href="mari_o_s_8c.html#aaba88b24a21a6c70c895c0d55f4a69a0">size</a>, <a class="el" href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">queue_t::size</a>, <a class="el" href="structqueue__t.html#a93aef13d250c24044e5c5642363adcc2">queue_t::tasks_waiting_to_receive</a>, <a class="el" href="structqueue__t.html#aa634f12fb1d05a0065b87cde43cc2c89">queue_t::tasks_waiting_to_send</a>, and <a class="el" href="structqueue__t.html#ac92c96e0bda532ea4f6d57ae11ab4a8e">queue_t::wLock</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="keywordtype">int</span> writtenFlag = 0;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <span class="keywordflow">while</span>(0 == writtenFlag) <span class="comment">//This flag will be set once the writing is achieved</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                <a class="code" href="port_8c.html#a22857ed9823f022f5988f9afdbb8994e">enter_critical_section</a>();</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                {</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                        <span class="keywordflow">if</span>(<a class="code" href="queue_8h.html#a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a">MARIOS_QUEUE_UNLOCKED</a> == queue-&gt;<a class="code" href="structqueue__t.html#ac92c96e0bda532ea4f6d57ae11ab4a8e">wLock</a>)</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                        {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                                queue-&gt;<a class="code" href="structqueue__t.html#ac92c96e0bda532ea4f6d57ae11ab4a8e">wLock</a> = <a class="code" href="queue_8h.html#a4385d73a50ac726301719a41792283f1a83519493888e56b0990dff2d46ab9127">MARIOS_QUEUE_LOCKED</a>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                                <span class="keywordflow">if</span>(msg_size &gt; queue-&gt;<a class="code" href="structqueue__t.html#ac6c2ff84f67a608cb66c1ea4f444b097">freeMemory</a>) <span class="comment">//Check available space and yield if no enough space</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                                {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                                        <span class="keywordflow">if</span>(<a class="code" href="queue_8h.html#ae9a509b7a9a7c776d31c2e84252e553fa7acf364e5312f230d838e5558e7e9d23">MARIOS_BLOCKING_QUEUE_OP</a> == blocking)</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                                        {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                                                queue-&gt;<a class="code" href="structqueue__t.html#aa634f12fb1d05a0065b87cde43cc2c89">tasks_waiting_to_send</a>[<a class="code" href="mari_o_s_8c.html#a203ea856aabbfe98ca3f54e1ce235ed5">get_current_task_id</a>()] = 1;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                                                <a class="code" href="mari_o_s_8c.html#a9464bc26366c37895638a04f5b4d7e5e">set_current_task_status</a>(<a class="code" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a216cb44922759fc8cc53a1f53c8b2ab6">MARIOS_TASK_STATUS_SUSPEND</a>);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                                                <a class="code" href="mari_o_s_8c.html#aa1ce5071a73faddfee5255c059bcde9f">mariOS_task_yield</a>(); </div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                                        }</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                        <span class="keywordflow">else</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                                        { </div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                                                queue-&gt;<a class="code" href="structqueue__t.html#ac92c96e0bda532ea4f6d57ae11ab4a8e">wLock</a> = <a class="code" href="queue_8h.html#a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a">MARIOS_QUEUE_UNLOCKED</a>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                                                <a class="code" href="port_8c.html#a7c958c081c18f69c4e77d463d88dfc0d">exit_critical_sction</a>();</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                                                <span class="keywordflow">return</span> <a class="code" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032da3f8b7b8bec033117b660862a40639384">MARIOS_QUEUE_FULL_OP</a>;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                                        }</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                                }</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                                <span class="keywordflow">else</span> <span class="comment">//Space available</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                                {</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                                        <span class="keywordflow">if</span>(queue-&gt;<a class="code" href="structqueue__t.html#a8fbdf5acdb9fc2aa62042037ebce4c5d">head</a>+msg_size &lt;= queue-&gt;<a class="code" href="mari_o_s_8c.html#aaba88b24a21a6c70c895c0d55f4a69a0">size</a>) <span class="comment">//The message just is append</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                                        {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                                                memcpy(queue-&gt;<a class="code" href="structqueue__t.html#a5a3c1755403b9945be005f3301291b5b">queueMemory</a>+queue-&gt;<a class="code" href="structqueue__t.html#a8fbdf5acdb9fc2aa62042037ebce4c5d">head</a>, msg, msg_size);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                                                queue-&gt;<a class="code" href="structqueue__t.html#a8fbdf5acdb9fc2aa62042037ebce4c5d">head</a> += msg_size;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                                        }</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                                        <span class="keywordflow">else</span> <span class="comment">//We need to split the copy</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                                        {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                                memcpy(queue-&gt;<a class="code" href="structqueue__t.html#a5a3c1755403b9945be005f3301291b5b">queueMemory</a>+queue-&gt;<a class="code" href="structqueue__t.html#a8fbdf5acdb9fc2aa62042037ebce4c5d">head</a>, msg, queue-&gt;<a class="code" href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">size</a>-queue-&gt;<a class="code" href="structqueue__t.html#a8fbdf5acdb9fc2aa62042037ebce4c5d">head</a>);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                                                memcpy(queue-&gt;<a class="code" href="structqueue__t.html#a5a3c1755403b9945be005f3301291b5b">queueMemory</a>, msg+queue-&gt;<a class="code" href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">size</a>-queue-&gt;<a class="code" href="structqueue__t.html#a8fbdf5acdb9fc2aa62042037ebce4c5d">head</a>, msg_size-(queue-&gt;<a class="code" href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">size</a>-queue-&gt;<a class="code" href="structqueue__t.html#a8fbdf5acdb9fc2aa62042037ebce4c5d">head</a>));</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                                                queue-&gt;<a class="code" href="structqueue__t.html#a8fbdf5acdb9fc2aa62042037ebce4c5d">head</a> = msg_size-(queue-&gt;<a class="code" href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">size</a>-queue-&gt;<a class="code" href="structqueue__t.html#a8fbdf5acdb9fc2aa62042037ebce4c5d">head</a>); <span class="comment">//The head just point to the first free location</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                                        }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                                        queue-&gt;<a class="code" href="structqueue__t.html#ac6c2ff84f67a608cb66c1ea4f444b097">freeMemory</a> -= msg_size;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                                        <span class="comment">//Let&#39;s make awaken suspended tasks</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                                        <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                                        <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code" href="mari_o_s__config_8h.html#af930526d08eb3382941b13342f41bf10">MARIOS_CONFIG_MAX_TASKS</a>; i++)</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                                                <span class="keywordflow">if</span>(1 == queue-&gt;<a class="code" href="structqueue__t.html#a93aef13d250c24044e5c5642363adcc2">tasks_waiting_to_receive</a>[i])</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                                                {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                                                        <a class="code" href="mari_o_s_8c.html#adad61ada0d646fc5395c0a1e3dc50919">set_task_status</a>(i, <a class="code" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a>);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                                                        queue-&gt;<a class="code" href="structqueue__t.html#a93aef13d250c24044e5c5642363adcc2">tasks_waiting_to_receive</a>[i] = 0;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                                                }</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                                        writtenFlag = 1;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                                }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                                queue-&gt;<a class="code" href="structqueue__t.html#ac92c96e0bda532ea4f6d57ae11ab4a8e">wLock</a> = <a class="code" href="queue_8h.html#a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a">MARIOS_QUEUE_UNLOCKED</a>;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                        }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                        <span class="keywordflow">else</span> <span class="comment">//The queue is just locked for sending</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                        {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                                <span class="keywordflow">if</span>(<a class="code" href="queue_8h.html#ae9a509b7a9a7c776d31c2e84252e553fa7acf364e5312f230d838e5558e7e9d23">MARIOS_BLOCKING_QUEUE_OP</a> == blocking)</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                                {</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                                        <a class="code" href="mari_o_s_8c.html#aa1ce5071a73faddfee5255c059bcde9f">mariOS_task_yield</a>();    </div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                                }</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                                <span class="keywordflow">else</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                                {  </div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                        <a class="code" href="port_8c.html#a7c958c081c18f69c4e77d463d88dfc0d">exit_critical_sction</a>();</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                                        <span class="keywordflow">return</span> <a class="code" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032dadc4ad8fd19fab26af6288a312d52b5e7">MARIOS_QUEUE_BUSY_OP</a>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                                }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                        }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                <a class="code" href="port_8c.html#a7c958c081c18f69c4e77d463d88dfc0d">exit_critical_sction</a>();</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        }</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="queue_8h.html#aef20e5d045b502d6959489d3e82a032da1119159d2fd835d28c1870ab6f594bbd">MARIOS_QUEUE_SUCCESS_OP</a>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div><div class="ttc" id="structqueue__t_html_aa634f12fb1d05a0065b87cde43cc2c89"><div class="ttname"><a href="structqueue__t.html#aa634f12fb1d05a0065b87cde43cc2c89">queue_t::tasks_waiting_to_send</a></div><div class="ttdeci">uint8_t tasks_waiting_to_send[MARIOS_CONFIG_MAX_TASKS]</div><div class="ttdef"><b>Definition:</b> queue.h:103</div></div>
<div class="ttc" id="queue_8h_html_a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a"><div class="ttname"><a href="queue_8h.html#a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a">MARIOS_QUEUE_UNLOCKED</a></div><div class="ttdef"><b>Definition:</b> queue.h:51</div></div>
<div class="ttc" id="mari_o_s_8c_html_aa1ce5071a73faddfee5255c059bcde9f"><div class="ttname"><a href="mari_o_s_8c.html#aa1ce5071a73faddfee5255c059bcde9f">mariOS_task_yield</a></div><div class="ttdeci">void mariOS_task_yield(void)</div><div class="ttdoc">This function implements the task yield, hence it gives to a task the possibility of a self-preemptio...</div><div class="ttdef"><b>Definition:</b> mariOS.c:159</div></div>
<div class="ttc" id="structqueue__t_html_a5a3c1755403b9945be005f3301291b5b"><div class="ttname"><a href="structqueue__t.html#a5a3c1755403b9945be005f3301291b5b">queue_t::queueMemory</a></div><div class="ttdeci">int8_t * queueMemory</div><div class="ttdef"><b>Definition:</b> queue.h:101</div></div>
<div class="ttc" id="queue_8h_html_ae9a509b7a9a7c776d31c2e84252e553fa7acf364e5312f230d838e5558e7e9d23"><div class="ttname"><a href="queue_8h.html#ae9a509b7a9a7c776d31c2e84252e553fa7acf364e5312f230d838e5558e7e9d23">MARIOS_BLOCKING_QUEUE_OP</a></div><div class="ttdef"><b>Definition:</b> queue.h:63</div></div>
<div class="ttc" id="mari_o_s_8c_html_adad61ada0d646fc5395c0a1e3dc50919"><div class="ttname"><a href="mari_o_s_8c.html#adad61ada0d646fc5395c0a1e3dc50919">set_task_status</a></div><div class="ttdeci">void set_task_status(mariOS_task_id_t task_id, mariOS_task_status_t status)</div><div class="ttdoc">This accessory function configure the status of the a task. </div><div class="ttdef"><b>Definition:</b> mariOS.c:227</div></div>
<div class="ttc" id="mari_o_s_8h_html_a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee"><div class="ttname"><a href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a></div><div class="ttdef"><b>Definition:</b> mariOS.h:68</div></div>
<div class="ttc" id="port_8c_html_a22857ed9823f022f5988f9afdbb8994e"><div class="ttname"><a href="port_8c.html#a22857ed9823f022f5988f9afdbb8994e">enter_critical_section</a></div><div class="ttdeci">void enter_critical_section()</div><div class="ttdoc">The function enter_critical_section must guarantee that no other task can access shared resources of ...</div><div class="ttdef"><b>Definition:</b> port.c:153</div></div>
<div class="ttc" id="queue_8h_html_aef20e5d045b502d6959489d3e82a032da3f8b7b8bec033117b660862a40639384"><div class="ttname"><a href="queue_8h.html#aef20e5d045b502d6959489d3e82a032da3f8b7b8bec033117b660862a40639384">MARIOS_QUEUE_FULL_OP</a></div><div class="ttdef"><b>Definition:</b> queue.h:84</div></div>
<div class="ttc" id="structqueue__t_html_a0b109c1e636c7826326f780e0af75c8e"><div class="ttname"><a href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">queue_t::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdef"><b>Definition:</b> queue.h:99</div></div>
<div class="ttc" id="queue_8h_html_aef20e5d045b502d6959489d3e82a032dadc4ad8fd19fab26af6288a312d52b5e7"><div class="ttname"><a href="queue_8h.html#aef20e5d045b502d6959489d3e82a032dadc4ad8fd19fab26af6288a312d52b5e7">MARIOS_QUEUE_BUSY_OP</a></div><div class="ttdef"><b>Definition:</b> queue.h:83</div></div>
<div class="ttc" id="mari_o_s_8h_html_a2d398ecdf64ae2d69b62a370306d7e24a216cb44922759fc8cc53a1f53c8b2ab6"><div class="ttname"><a href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a216cb44922759fc8cc53a1f53c8b2ab6">MARIOS_TASK_STATUS_SUSPEND</a></div><div class="ttdef"><b>Definition:</b> mariOS.h:71</div></div>
<div class="ttc" id="mari_o_s__config_8h_html_af930526d08eb3382941b13342f41bf10"><div class="ttname"><a href="mari_o_s__config_8h.html#af930526d08eb3382941b13342f41bf10">MARIOS_CONFIG_MAX_TASKS</a></div><div class="ttdeci">#define MARIOS_CONFIG_MAX_TASKS</div><div class="ttdef"><b>Definition:</b> mariOS_config.h:36</div></div>
<div class="ttc" id="port_8c_html_a7c958c081c18f69c4e77d463d88dfc0d"><div class="ttname"><a href="port_8c.html#a7c958c081c18f69c4e77d463d88dfc0d">exit_critical_sction</a></div><div class="ttdeci">void exit_critical_sction()</div><div class="ttdoc">The function exit_critical_sction guarantees that the current task can be preempt by the scheduler in...</div><div class="ttdef"><b>Definition:</b> port.c:157</div></div>
<div class="ttc" id="structqueue__t_html_a93aef13d250c24044e5c5642363adcc2"><div class="ttname"><a href="structqueue__t.html#a93aef13d250c24044e5c5642363adcc2">queue_t::tasks_waiting_to_receive</a></div><div class="ttdeci">uint8_t tasks_waiting_to_receive[MARIOS_CONFIG_MAX_TASKS]</div><div class="ttdef"><b>Definition:</b> queue.h:104</div></div>
<div class="ttc" id="queue_8h_html_aef20e5d045b502d6959489d3e82a032da1119159d2fd835d28c1870ab6f594bbd"><div class="ttname"><a href="queue_8h.html#aef20e5d045b502d6959489d3e82a032da1119159d2fd835d28c1870ab6f594bbd">MARIOS_QUEUE_SUCCESS_OP</a></div><div class="ttdef"><b>Definition:</b> queue.h:82</div></div>
<div class="ttc" id="mari_o_s_8c_html_aaba88b24a21a6c70c895c0d55f4a69a0"><div class="ttname"><a href="mari_o_s_8c.html#aaba88b24a21a6c70c895c0d55f4a69a0">size</a></div><div class="ttdeci">uint16_t size</div><div class="ttdef"><b>Definition:</b> mariOS.c:47</div></div>
<div class="ttc" id="structqueue__t_html_a8fbdf5acdb9fc2aa62042037ebce4c5d"><div class="ttname"><a href="structqueue__t.html#a8fbdf5acdb9fc2aa62042037ebce4c5d">queue_t::head</a></div><div class="ttdeci">volatile uint32_t head</div><div class="ttdef"><b>Definition:</b> queue.h:96</div></div>
<div class="ttc" id="queue_8h_html_a4385d73a50ac726301719a41792283f1a83519493888e56b0990dff2d46ab9127"><div class="ttname"><a href="queue_8h.html#a4385d73a50ac726301719a41792283f1a83519493888e56b0990dff2d46ab9127">MARIOS_QUEUE_LOCKED</a></div><div class="ttdef"><b>Definition:</b> queue.h:50</div></div>
<div class="ttc" id="structqueue__t_html_ac6c2ff84f67a608cb66c1ea4f444b097"><div class="ttname"><a href="structqueue__t.html#ac6c2ff84f67a608cb66c1ea4f444b097">queue_t::freeMemory</a></div><div class="ttdeci">uint32_t freeMemory</div><div class="ttdef"><b>Definition:</b> queue.h:100</div></div>
<div class="ttc" id="mari_o_s_8c_html_a9464bc26366c37895638a04f5b4d7e5e"><div class="ttname"><a href="mari_o_s_8c.html#a9464bc26366c37895638a04f5b4d7e5e">set_current_task_status</a></div><div class="ttdeci">void set_current_task_status(mariOS_task_status_t status)</div><div class="ttdoc">This accessory function configure the status of the current active task. </div><div class="ttdef"><b>Definition:</b> mariOS.c:222</div></div>
<div class="ttc" id="structqueue__t_html_ac92c96e0bda532ea4f6d57ae11ab4a8e"><div class="ttname"><a href="structqueue__t.html#ac92c96e0bda532ea4f6d57ae11ab4a8e">queue_t::wLock</a></div><div class="ttdeci">volatile mariOS_queue_status_t wLock</div><div class="ttdef"><b>Definition:</b> queue.h:107</div></div>
<div class="ttc" id="mari_o_s_8c_html_a203ea856aabbfe98ca3f54e1ce235ed5"><div class="ttname"><a href="mari_o_s_8c.html#a203ea856aabbfe98ca3f54e1ce235ed5">get_current_task_id</a></div><div class="ttdeci">mariOS_task_id_t get_current_task_id(void)</div><div class="ttdoc">This accessory function returns the mariOS_task_id of the current active task. </div><div class="ttdef"><b>Definition:</b> mariOS.c:217</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_a840bf7d51dbc4a52e7cfd3234c2475f1_cgraph.png" border="0" usemap="#queue_8c_a840bf7d51dbc4a52e7cfd3234c2475f1_cgraph" alt=""/></div>
<map name="queue_8c_a840bf7d51dbc4a52e7cfd3234c2475f1_cgraph" id="queue_8c_a840bf7d51dbc4a52e7cfd3234c2475f1_cgraph">
<area shape="rect" id="node2" href="port_8c.html#a22857ed9823f022f5988f9afdbb8994e" title="The function enter_critical_section must guarantee that no other task can access shared resources of ..." alt="" coords="121,5,237,32"/>
<area shape="rect" id="node3" href="port_8c.html#a7c958c081c18f69c4e77d463d88dfc0d" title="The function exit_critical_sction guarantees that the current task can be preempt by the scheduler in..." alt="" coords="127,56,230,83"/>
<area shape="rect" id="node4" href="mari_o_s_8c.html#a203ea856aabbfe98ca3f54e1ce235ed5" title="This accessory function returns the mariOS_task_id of the current active task. " alt="" coords="124,107,233,133"/>
<area shape="rect" id="node5" href="mari_o_s_8c.html#aa1ce5071a73faddfee5255c059bcde9f" title="This function implements the task yield, hence it gives to a task the possibility of a self&#45;preemptio..." alt="" coords="126,157,231,184"/>
<area shape="rect" id="node8" href="mari_o_s_8c.html#a9464bc26366c37895638a04f5b4d7e5e" title="This accessory function configure the status of the current active task. " alt="" coords="115,208,243,235"/>
<area shape="rect" id="node9" href="mari_o_s_8c.html#adad61ada0d646fc5395c0a1e3dc50919" title="This accessory function configure the status of the a task. " alt="" coords="297,245,389,272"/>
<area shape="rect" id="node6" href="mari_o_s_8c.html#ab7b836592c7610e95c89ae7989b63d63" title="This function implements the mariOS&#39;s scheduler. The main aim is to get the current active task statu..." alt="" coords="291,132,396,159"/>
<area shape="rect" id="node7" href="port_8c.html#a58c8b2ad0ea491a6642e5e1cbd358c89" title="Whenever the scheduler wants to remove the current task in favor of another task, it can explicitly c..." alt="" coords="322,183,365,209"/>
</map>
</div>

</div>
</div>
<a id="a4335c31b2e37a28463ef4acdc59602fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4335c31b2e37a28463ef4acdc59602fb">&#9670;&nbsp;</a></span>reset_queue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reset_queue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="queue_8h.html#aff6e77e5eb7df3c39e46852e86dd458f">mariOS_queue</a> *&#160;</td>
          <td class="paramname"><em>queue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The function restore the queue in a pristine state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">queue</td><td>is the queue handler </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>before continue, we must be sure the queue are not blocked </p>

<p class="reference">References <a class="el" href="structqueue__t.html#ac6c2ff84f67a608cb66c1ea4f444b097">queue_t::freeMemory</a>, <a class="el" href="structqueue__t.html#a8fbdf5acdb9fc2aa62042037ebce4c5d">queue_t::head</a>, <a class="el" href="mari_o_s__config_8h.html#af930526d08eb3382941b13342f41bf10">MARIOS_CONFIG_MAX_TASKS</a>, <a class="el" href="queue_8h.html#a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a">MARIOS_QUEUE_UNLOCKED</a>, <a class="el" href="structqueue__t.html#a5a3c1755403b9945be005f3301291b5b">queue_t::queueMemory</a>, <a class="el" href="structqueue__t.html#aff5d379a9e52bb26c4518a37370e7636">queue_t::rLock</a>, <a class="el" href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">queue_t::size</a>, <a class="el" href="structqueue__t.html#adf98f27497905236d9782e06747d89d6">queue_t::tail</a>, <a class="el" href="structqueue__t.html#a93aef13d250c24044e5c5642363adcc2">queue_t::tasks_waiting_to_receive</a>, <a class="el" href="structqueue__t.html#aa634f12fb1d05a0065b87cde43cc2c89">queue_t::tasks_waiting_to_send</a>, and <a class="el" href="structqueue__t.html#ac92c96e0bda532ea4f6d57ae11ab4a8e">queue_t::wLock</a>.</p>
<div class="fragment"><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;{</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="queue_8h.html#a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a">MARIOS_QUEUE_UNLOCKED</a> == queue-&gt;<a class="code" href="structqueue__t.html#aff5d379a9e52bb26c4518a37370e7636">rLock</a> &amp;&amp; <a class="code" href="queue_8h.html#a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a">MARIOS_QUEUE_UNLOCKED</a> == queue-&gt;<a class="code" href="structqueue__t.html#ac92c96e0bda532ea4f6d57ae11ab4a8e">wLock</a>) </div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                <span class="keywordflow">for</span>(i = 0; i &lt; queue-&gt;<a class="code" href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">size</a>; i++)</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                        queue-&gt;<a class="code" href="structqueue__t.html#a5a3c1755403b9945be005f3301291b5b">queueMemory</a>[i] = 0;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                queue-&gt;<a class="code" href="structqueue__t.html#a8fbdf5acdb9fc2aa62042037ebce4c5d">head</a> = 0;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                queue-&gt;<a class="code" href="structqueue__t.html#adf98f27497905236d9782e06747d89d6">tail</a> = 0;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                queue-&gt;<a class="code" href="structqueue__t.html#ac6c2ff84f67a608cb66c1ea4f444b097">freeMemory</a> = queue-&gt;<a class="code" href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">size</a>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code" href="mari_o_s__config_8h.html#af930526d08eb3382941b13342f41bf10">MARIOS_CONFIG_MAX_TASKS</a>; i++)</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                        queue-&gt;<a class="code" href="structqueue__t.html#a93aef13d250c24044e5c5642363adcc2">tasks_waiting_to_receive</a>[i] = 0;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                        queue-&gt;<a class="code" href="structqueue__t.html#aa634f12fb1d05a0065b87cde43cc2c89">tasks_waiting_to_send</a>[i] = 0;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        }</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;}</div><div class="ttc" id="structqueue__t_html_aa634f12fb1d05a0065b87cde43cc2c89"><div class="ttname"><a href="structqueue__t.html#aa634f12fb1d05a0065b87cde43cc2c89">queue_t::tasks_waiting_to_send</a></div><div class="ttdeci">uint8_t tasks_waiting_to_send[MARIOS_CONFIG_MAX_TASKS]</div><div class="ttdef"><b>Definition:</b> queue.h:103</div></div>
<div class="ttc" id="queue_8h_html_a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a"><div class="ttname"><a href="queue_8h.html#a4385d73a50ac726301719a41792283f1a9bffddce8f027f54c735147b952a525a">MARIOS_QUEUE_UNLOCKED</a></div><div class="ttdef"><b>Definition:</b> queue.h:51</div></div>
<div class="ttc" id="structqueue__t_html_a5a3c1755403b9945be005f3301291b5b"><div class="ttname"><a href="structqueue__t.html#a5a3c1755403b9945be005f3301291b5b">queue_t::queueMemory</a></div><div class="ttdeci">int8_t * queueMemory</div><div class="ttdef"><b>Definition:</b> queue.h:101</div></div>
<div class="ttc" id="structqueue__t_html_adf98f27497905236d9782e06747d89d6"><div class="ttname"><a href="structqueue__t.html#adf98f27497905236d9782e06747d89d6">queue_t::tail</a></div><div class="ttdeci">volatile uint32_t tail</div><div class="ttdef"><b>Definition:</b> queue.h:97</div></div>
<div class="ttc" id="structqueue__t_html_a0b109c1e636c7826326f780e0af75c8e"><div class="ttname"><a href="structqueue__t.html#a0b109c1e636c7826326f780e0af75c8e">queue_t::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdef"><b>Definition:</b> queue.h:99</div></div>
<div class="ttc" id="structqueue__t_html_aff5d379a9e52bb26c4518a37370e7636"><div class="ttname"><a href="structqueue__t.html#aff5d379a9e52bb26c4518a37370e7636">queue_t::rLock</a></div><div class="ttdeci">volatile mariOS_queue_status_t rLock</div><div class="ttdef"><b>Definition:</b> queue.h:106</div></div>
<div class="ttc" id="mari_o_s__config_8h_html_af930526d08eb3382941b13342f41bf10"><div class="ttname"><a href="mari_o_s__config_8h.html#af930526d08eb3382941b13342f41bf10">MARIOS_CONFIG_MAX_TASKS</a></div><div class="ttdeci">#define MARIOS_CONFIG_MAX_TASKS</div><div class="ttdef"><b>Definition:</b> mariOS_config.h:36</div></div>
<div class="ttc" id="structqueue__t_html_a93aef13d250c24044e5c5642363adcc2"><div class="ttname"><a href="structqueue__t.html#a93aef13d250c24044e5c5642363adcc2">queue_t::tasks_waiting_to_receive</a></div><div class="ttdeci">uint8_t tasks_waiting_to_receive[MARIOS_CONFIG_MAX_TASKS]</div><div class="ttdef"><b>Definition:</b> queue.h:104</div></div>
<div class="ttc" id="structqueue__t_html_a8fbdf5acdb9fc2aa62042037ebce4c5d"><div class="ttname"><a href="structqueue__t.html#a8fbdf5acdb9fc2aa62042037ebce4c5d">queue_t::head</a></div><div class="ttdeci">volatile uint32_t head</div><div class="ttdef"><b>Definition:</b> queue.h:96</div></div>
<div class="ttc" id="structqueue__t_html_ac6c2ff84f67a608cb66c1ea4f444b097"><div class="ttname"><a href="structqueue__t.html#ac6c2ff84f67a608cb66c1ea4f444b097">queue_t::freeMemory</a></div><div class="ttdeci">uint32_t freeMemory</div><div class="ttdef"><b>Definition:</b> queue.h:100</div></div>
<div class="ttc" id="structqueue__t_html_ac92c96e0bda532ea4f6d57ae11ab4a8e"><div class="ttname"><a href="structqueue__t.html#ac92c96e0bda532ea4f6d57ae11ab4a8e">queue_t::wLock</a></div><div class="ttdeci">volatile mariOS_queue_status_t wLock</div><div class="ttdef"><b>Definition:</b> queue.h:107</div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jul 11 2018 15:06:15 for mariOS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
