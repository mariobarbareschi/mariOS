<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mariOS: include/mariOS.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mariOS
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">mariOS Answers the Request for an Implementation of an OS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mariOS.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="marios__config_8h_source.html">marios_config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="port_8h_source.html">port.h</a>&quot;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for mariOS.h:</div>
<div class="dyncontent">
<div class="center"><img src="mari_o_s_8h__incl.png" border="0" usemap="#include_2mari_o_s_8h" alt=""/></div>
<map name="include_2mari_o_s_8h" id="include_2mari_o_s_8h">
<area shape="rect" id="node2" href="marios__config_8h.html" title="marios_config.h" alt="" coords="5,80,97,107"/>
<area shape="rect" id="node4" href="port_8h.html" title="port.h" alt="" coords="122,80,170,107"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="mari_o_s_8h__dep__incl.png" border="0" usemap="#include_2mari_o_s_8hdep" alt=""/></div>
<map name="include_2mari_o_s_8hdep" id="include_2mari_o_s_8hdep">
<area shape="rect" id="node2" href="queue_8h.html" title="include/queue.h" alt="" coords="9,80,101,107"/>
</map>
</div>
</div>
<p><a href="mari_o_s_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmari_o_s__task__control__block__t.html">mariOS_task_control_block_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This struct defines the mariOS task control block. It contains the task stack pointer, the function pointer to the task implementation, the task status, the last time it has been scheduled as active, the number of ticks that the mariOS system tick has to reach to switch its status from MARIOS_TASK_STATUS_WAIT to MARIOS_TASK_STATUS_READY.  <a href="structmari_o_s__task__control__block__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a65a006328b018e4b3bf58079db73014b"><td class="memItemLeft" align="right" valign="top">typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a65a006328b018e4b3bf58079db73014b">marios_stack_t</a></td></tr>
<tr class="separator:a65a006328b018e4b3bf58079db73014b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf176d97d3dfba5ce3cce1e9b2db660f"><td class="memItemLeft" align="right" valign="top">typedef uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a></td></tr>
<tr class="separator:aaf176d97d3dfba5ce3cce1e9b2db660f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a2d398ecdf64ae2d69b62a370306d7e24"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a> { <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a> = 0, 
<a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191">MARIOS_TASK_STATUS_ACTIVE</a> = 1, 
<a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93">MARIOS_TASK_STATUS_WAIT</a> = -1, 
<a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a216cb44922759fc8cc53a1f53c8b2ab6">MARIOS_TASK_STATUS_SUSPEND</a> = 2
 }</td></tr>
<tr class="separator:a2d398ecdf64ae2d69b62a370306d7e24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a145925a06d731acd607bed860d7d57e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a145925a06d731acd607bed860d7d57e2">mariOS_init</a> (void)</td></tr>
<tr class="memdesc:a145925a06d731acd607bed860d7d57e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initialize the marios_tasks_list struct and populate it\ with the first task of the system, namely the idle one. For this reason, idle takes the threadID 0.  <a href="#a145925a06d731acd607bed860d7d57e2">More...</a><br /></td></tr>
<tr class="separator:a145925a06d731acd607bed860d7d57e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af84cc3fb915d6a38431cce3e3fd20a93"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#af84cc3fb915d6a38431cce3e3fd20a93">mariOS_task_init</a> (void(*handler)(void), uint32_t stack_size)</td></tr>
<tr class="memdesc:af84cc3fb915d6a38431cce3e3fd20a93"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initialize a new entry in the tasks list. Actually, mariOS defines a task as a C function with no input/output parameters (properly, non returning/cyclic).The stack size has to be statically determined, taking into account the number of nesting function calling and related static-allocated data (which belongs to the task's stack).  <a href="#af84cc3fb915d6a38431cce3e3fd20a93">More...</a><br /></td></tr>
<tr class="separator:af84cc3fb915d6a38431cce3e3fd20a93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74fd826d4eb7eee7307361c3c9a8a404"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a74fd826d4eb7eee7307361c3c9a8a404">mariOS_start</a> (uint32_t systick_ticks)</td></tr>
<tr class="memdesc:a74fd826d4eb7eee7307361c3c9a8a404"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function makes mariOS started, meant that the system's timer has to\ be configured accordingly to the mariOS defined sytick and the first task\ (the idle one) has to be loaded. Depending on the system target, some other configurations must be provided, especially those related to the interrupt controller, interrupt priority and additional driver configuration.  <a href="#a74fd826d4eb7eee7307361c3c9a8a404">More...</a><br /></td></tr>
<tr class="separator:a74fd826d4eb7eee7307361c3c9a8a404"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7b836592c7610e95c89ae7989b63d63"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#ab7b836592c7610e95c89ae7989b63d63">mariOS_scheduler</a> (void)</td></tr>
<tr class="memdesc:ab7b836592c7610e95c89ae7989b63d63"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function implements the mariOS's scheduler. The main aim is to get the current active task status to MARIOS_TASK_STATUS_READY (mariOS_current_task), pick a task from the mariOS's tasks list and assign it to the marios_next_task, which is then set as MARIOS_TASK_STATUS_READY.  <a href="#ab7b836592c7610e95c89ae7989b63d63">More...</a><br /></td></tr>
<tr class="separator:ab7b836592c7610e95c89ae7989b63d63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1ce5071a73faddfee5255c059bcde9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#aa1ce5071a73faddfee5255c059bcde9f">mariOS_task_yield</a> (void)</td></tr>
<tr class="separator:aa1ce5071a73faddfee5255c059bcde9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8027dcd13880c2971f3627b052b481b3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a8027dcd13880c2971f3627b052b481b3">mariOS_delay</a> (uint32_t ticks)</td></tr>
<tr class="memdesc:a8027dcd13880c2971f3627b052b481b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function allows to switch the task status from MARIOS_TASK_STATUS_ACTIVE to the MARIOS_TASK_STATUS_WAIT. In particular, the function must record the time (expressed in mariOS ticks) on which the task status has to be switch to MARIOS_TASK_STATUS_READY. Until the task status is MARIOS_TASK_STATUS_WAIT, the scheduler cannot execute (mariOS does not admit task status transition from MARIOS_TASK_STATUS_WAIT to MARIOS_TASK_STATUS_ACTIVE).  <a href="#a8027dcd13880c2971f3627b052b481b3">More...</a><br /></td></tr>
<tr class="separator:a8027dcd13880c2971f3627b052b481b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62b1be2538fbcb50d26e830cc0b7a1d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a62b1be2538fbcb50d26e830cc0b7a1d8">mariOS_systick_handler</a> (void)</td></tr>
<tr class="memdesc:a62b1be2538fbcb50d26e830cc0b7a1d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function represents the core of mariOS. As a common implementation along RTOS projects, the systick handler must take care about main duties of the RTOS that must be performed periodically. A basic one comprehend the mariosTicks incrementing, the verification of which tasks that have the status MARIOS_TASK_STATUS_WAIT must be switched as MARIOS_TASK_STATUS_READY and, finally, the scheduler calling.  <a href="#a62b1be2538fbcb50d26e830cc0b7a1d8">More...</a><br /></td></tr>
<tr class="separator:a62b1be2538fbcb50d26e830cc0b7a1d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a203ea856aabbfe98ca3f54e1ce235ed5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a203ea856aabbfe98ca3f54e1ce235ed5">get_current_task_id</a> (void)</td></tr>
<tr class="separator:a203ea856aabbfe98ca3f54e1ce235ed5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9464bc26366c37895638a04f5b4d7e5e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a9464bc26366c37895638a04f5b4d7e5e">set_current_task_status</a> (<a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a> status)</td></tr>
<tr class="separator:a9464bc26366c37895638a04f5b4d7e5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adad61ada0d646fc5395c0a1e3dc50919"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#adad61ada0d646fc5395c0a1e3dc50919">set_task_status</a> (<a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a> task_id, <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a> status)</td></tr>
<tr class="separator:adad61ada0d646fc5395c0a1e3dc50919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72e631d3a2ed9e11836f0f1149ba65b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a72e631d3a2ed9e11836f0f1149ba65b2">get_current_task_status</a> (void)</td></tr>
<tr class="separator:a72e631d3a2ed9e11836f0f1149ba65b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a228860664d47f77e7b5b7195b0242021"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a228860664d47f77e7b5b7195b0242021">get_task_status</a> (<a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a> task_id)</td></tr>
<tr class="separator:a228860664d47f77e7b5b7195b0242021"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a65a006328b018e4b3bf58079db73014b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65a006328b018e4b3bf58079db73014b">&#9670;&nbsp;</a></span>marios_stack_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint32_t <a class="el" href="mari_o_s_8h.html#a65a006328b018e4b3bf58079db73014b">marios_stack_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aaf176d97d3dfba5ce3cce1e9b2db660f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf176d97d3dfba5ce3cce1e9b2db660f">&#9670;&nbsp;</a></span>mariOS_task_id_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint16_t <a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a2d398ecdf64ae2d69b62a370306d7e24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d398ecdf64ae2d69b62a370306d7e24">&#9670;&nbsp;</a></span>mariOS_task_status_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The mariOS_task_status_t is the enumerative type that mariOS exploits for implemeting the scheduler. Actually, mariOS handles four different task status.</p>
<p>MARIOS_TASK_STATUS_READY indicates that a task is ready to be scheduled, hence the scheduling algorithm can take it into consideration.</p>
<p>MARIOS_TASK_STATUS_ACTIVE indicates that a taks is currently executing. As one can figure out, one and only one task a time takes the active status.</p>
<p>MARIOS_TASK_STATUS_WAIT means that a task performed the mariOS_delay function for some ticks which have not yet been elapsing. In this status, a task cannot be scheduled as active.</p>
<p>MARIOS_TASK_STATUS_SUSPEND means that a task voluntary performed a yield due to a resource contest, such as sending/receiving to/from a queue. In this status, a task cannot be scheduled as active. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee"></a>MARIOS_TASK_STATUS_READY&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191"></a>MARIOS_TASK_STATUS_ACTIVE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93"></a>MARIOS_TASK_STATUS_WAIT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2d398ecdf64ae2d69b62a370306d7e24a216cb44922759fc8cc53a1f53c8b2ab6"></a>MARIOS_TASK_STATUS_SUSPEND&#160;</td><td class="fielddoc"></td></tr>
</table>
<div class="fragment"><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;{</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        <a class="code" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a> = 0,</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        <a class="code" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191">MARIOS_TASK_STATUS_ACTIVE</a> = 1,</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        <a class="code" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93">MARIOS_TASK_STATUS_WAIT</a> = -1,</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        <a class="code" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a216cb44922759fc8cc53a1f53c8b2ab6">MARIOS_TASK_STATUS_SUSPEND</a> = 2</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;} <a class="code" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a>;</div><div class="ttc" id="mari_o_s_8h_html_a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee"><div class="ttname"><a href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a></div><div class="ttdef"><b>Definition:</b> mariOS.h:35</div></div>
<div class="ttc" id="mari_o_s_8h_html_a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93"><div class="ttname"><a href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93">MARIOS_TASK_STATUS_WAIT</a></div><div class="ttdef"><b>Definition:</b> mariOS.h:37</div></div>
<div class="ttc" id="mari_o_s_8h_html_a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191"><div class="ttname"><a href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191">MARIOS_TASK_STATUS_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> mariOS.h:36</div></div>
<div class="ttc" id="mari_o_s_8h_html_a2d398ecdf64ae2d69b62a370306d7e24a216cb44922759fc8cc53a1f53c8b2ab6"><div class="ttname"><a href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a216cb44922759fc8cc53a1f53c8b2ab6">MARIOS_TASK_STATUS_SUSPEND</a></div><div class="ttdef"><b>Definition:</b> mariOS.h:38</div></div>
<div class="ttc" id="mari_o_s_8h_html_a2d398ecdf64ae2d69b62a370306d7e24"><div class="ttname"><a href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a></div><div class="ttdeci">mariOS_task_status_t</div><div class="ttdef"><b>Definition:</b> mariOS.h:33</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a203ea856aabbfe98ca3f54e1ce235ed5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a203ea856aabbfe98ca3f54e1ce235ed5">&#9670;&nbsp;</a></span>get_current_task_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a> get_current_task_id </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This accessory function returns the mariOS_task_id of the current active task</p>
<dl class="section return"><dt>Returns</dt><dd>mariOS_task_id of the current active task </dd></dl>

</div>
</div>
<a id="a72e631d3a2ed9e11836f0f1149ba65b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72e631d3a2ed9e11836f0f1149ba65b2">&#9670;&nbsp;</a></span>get_current_task_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a> get_current_task_status </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This accessory function returns the status of the current active task</p>
<dl class="section warning"><dt>Warning</dt><dd>Currently, mariOS admits one and only one status when the task is running, namely MARIOS_TASK_STATUS_ACTIVE. However, future extensions may plan more than one active status.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>mariOS_task_status of the current active task </dd></dl>

</div>
</div>
<a id="a228860664d47f77e7b5b7195b0242021"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a228860664d47f77e7b5b7195b0242021">&#9670;&nbsp;</a></span>get_task_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a> get_task_status </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a>&#160;</td>
          <td class="paramname"><em>task_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This accessory function returns the status of a given task</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">task_id</td><td>is the ID of the task</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mariOS_task_status of the task_id task </dd></dl>

</div>
</div>
<a id="a8027dcd13880c2971f3627b052b481b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8027dcd13880c2971f3627b052b481b3">&#9670;&nbsp;</a></span>mariOS_delay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mariOS_delay </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ticks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function allows to switch the task status from MARIOS_TASK_STATUS_ACTIVE to the MARIOS_TASK_STATUS_WAIT. In particular, the function must record the time (expressed in mariOS ticks) on which the task status has to be switch to MARIOS_TASK_STATUS_READY. Until the task status is MARIOS_TASK_STATUS_WAIT, the scheduler cannot execute (mariOS does not admit task status transition from MARIOS_TASK_STATUS_WAIT to MARIOS_TASK_STATUS_ACTIVE). </p>
<p>Once the task status transition from MARIOS_TASK_STATUS_ACTIVE to MARIOS_TASK_STATUS_WAIT completed, the function calls mariOS_task_yield to call the scheduler and perform a context switch.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ticks</td><td>represents the mariOS ticks that the scheduler must wait before taking into account the task when it is called. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a145925a06d731acd607bed860d7d57e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a145925a06d731acd607bed860d7d57e2">&#9670;&nbsp;</a></span>mariOS_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mariOS_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function initialize the marios_tasks_list struct and populate it\ with the first task of the system, namely the idle one. For this reason, idle takes the threadID 0. </p>

</div>
</div>
<a id="ab7b836592c7610e95c89ae7989b63d63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7b836592c7610e95c89ae7989b63d63">&#9670;&nbsp;</a></span>mariOS_scheduler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mariOS_scheduler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function implements the mariOS's scheduler. The main aim is to get the current active task status to MARIOS_TASK_STATUS_READY (mariOS_current_task), pick a task from the mariOS's tasks list and assign it to the marios_next_task, which is then set as MARIOS_TASK_STATUS_READY. </p>
<p>Currently, the scheduler implementation is just a round robin, hence the scheduler picks the task next to the current one in the mariOS tasks list. Obviously, a more sophisticated implementation is feasible, but maybe the marios_task_control_block_t should be enriched with further information.</p>
<p>Most important aspect, which does not depend on specific implementation of scheduler, is the existance of the mariOS_idle task. Indded, each time the scheduler is not able to determine a task to be executed, it should pick the mariOS_idle task instead. In other words, the mariOS_idle task is the least priority task of the system, matching the general meaing of the idle task. </p>

</div>
</div>
<a id="a74fd826d4eb7eee7307361c3c9a8a404"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74fd826d4eb7eee7307361c3c9a8a404">&#9670;&nbsp;</a></span>mariOS_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mariOS_start </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>systick_ticks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function makes mariOS started, meant that the system's timer has to\ be configured accordingly to the mariOS defined sytick and the first task\ (the idle one) has to be loaded. Depending on the system target, some other configurations must be provided, especially those related to the interrupt controller, interrupt priority and additional driver configuration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">systick_ticks</td><td>is the number of last_active_time's ticks between two interruption events </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a62b1be2538fbcb50d26e830cc0b7a1d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62b1be2538fbcb50d26e830cc0b7a1d8">&#9670;&nbsp;</a></span>mariOS_systick_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mariOS_systick_handler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function represents the core of mariOS. As a common implementation along RTOS projects, the systick handler must take care about main duties of the RTOS that must be performed periodically. A basic one comprehend the mariosTicks incrementing, the verification of which tasks that have the status MARIOS_TASK_STATUS_WAIT must be switched as MARIOS_TASK_STATUS_READY and, finally, the scheduler calling. </p>

</div>
</div>
<a id="af84cc3fb915d6a38431cce3e3fd20a93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af84cc3fb915d6a38431cce3e3fd20a93">&#9670;&nbsp;</a></span>mariOS_task_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a> mariOS_task_init </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>stack_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function initialize a new entry in the tasks list. Actually, mariOS defines a task as a C function with no input/output parameters (properly, non returning/cyclic).The stack size has to be statically determined, taking into account the number of nesting function calling and related static-allocated data (which belongs to the task's stack). </p>
<p>Status of each created task is set to MARIOS_TASK_STATUS_READY, meant that the scheduler may pick it to be the current executed task, setting it to the status MARIOS_TASK_STATUS_ACTIVE. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handler</td><td>is the function pointer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stack_size</td><td>decides the size of the task's stack </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa1ce5071a73faddfee5255c059bcde9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1ce5071a73faddfee5255c059bcde9f">&#9670;&nbsp;</a></span>mariOS_task_yield()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mariOS_task_yield </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function implements the task yield, hence it gives to a task the possibility of a self-preemption for letting the scheduler pick another task. Hence, first, the function must call the scheduler, then it forces the system to call the yield, which forces the PendSV_Handler ISR whenever the scheduler picks a task different to the current active one. </p>

</div>
</div>
<a id="a9464bc26366c37895638a04f5b4d7e5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9464bc26366c37895638a04f5b4d7e5e">&#9670;&nbsp;</a></span>set_current_task_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_current_task_status </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a>&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This accessory function configure the status of the current active task</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>is the new status of current active task </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adad61ada0d646fc5395c0a1e3dc50919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adad61ada0d646fc5395c0a1e3dc50919">&#9670;&nbsp;</a></span>set_task_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_task_status </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a>&#160;</td>
          <td class="paramname"><em>task_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a>&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This accessory function configure the status of the a task</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">task_id</td><td>is the id of the task to modify </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>is the new status of current active task </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jul 10 2018 23:35:46 for mariOS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
