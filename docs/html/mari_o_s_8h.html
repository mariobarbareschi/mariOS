<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mariOS: include/mariOS.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mariOS
   &#160;<span id="projectnumber">V1</span>
   </div>
   <div id="projectbrief">mariOS Answers the Request for an Implementation of an OS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mariOS.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Header file of main functionalities of mariOS. This file provides the mariOS task status enum, the definition of the task control block and public function for end users to manage the RTOS.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="mari_o_s__config_8h_source.html">mariOS_config.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="port_8h_source.html">port.h</a>&quot;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for mariOS.h:</div>
<div class="dyncontent">
<div class="center"><img src="mari_o_s_8h__incl.png" border="0" usemap="#include_2mari_o_s_8h" alt=""/></div>
<map name="include_2mari_o_s_8h" id="include_2mari_o_s_8h">
<area shape="rect" id="node2" href="mari_o_s__config_8h.html" title="This file contains definitions and macros intended to configure and modify some static parameters of ..." alt="" coords="5,80,101,107"/>
<area shape="rect" id="node4" href="port_8h.html" title="This header file specifies functions that are needed to mariOS for being executed onto a specific arc..." alt="" coords="125,80,173,107"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="mari_o_s_8h__dep__incl.png" border="0" usemap="#include_2mari_o_s_8hdep" alt=""/></div>
<map name="include_2mari_o_s_8hdep" id="include_2mari_o_s_8hdep">
<area shape="rect" id="node2" href="mari_o_s_8c.html" title="Implementation file of main functionalities of mariOS. This file provides the system&#39;s tasks list str..." alt="" coords="5,80,101,107"/>
<area shape="rect" id="node3" href="queue_8h.html" title="Header file of mariOS queue. This file contains some enum definitions (namely mariOS_queue_status_t, mariOS_blocking_queue_op_t and mariOS_queue_op_status_t ), the queue structure, which is exploited by queue accessory functions. " alt="" coords="126,80,218,107"/>
<area shape="rect" id="node4" href="queue_8c.html" title="Implementation file of mariOS queue. It just contains implementation of function declared in the corr..." alt="" coords="68,155,159,181"/>
<area shape="rect" id="node5" href="main_8c.html" title="Default main function. " alt="" coords="183,155,275,181"/>
</map>
</div>
</div>
<p><a href="mari_o_s_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmari_o_s__task__control__block__t.html">mariOS_task_control_block_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This struct defines the mariOS task control block. It contains the task stack pointer, the function pointer to the task implementation, the task status, the last time it has been scheduled as active, the number of ticks that the mariOS system tick has to reach to switch its status from <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93">MARIOS_TASK_STATUS_WAIT</a> to <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a>.  <a href="structmari_o_s__task__control__block__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad499e8ab44f02231c506648fd9dd5176"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#ad499e8ab44f02231c506648fd9dd5176">mariOS_Task</a>(taskname)&#160;&#160;&#160;static void taskname(void)</td></tr>
<tr class="separator:ad499e8ab44f02231c506648fd9dd5176"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53195ca22b94707d321f2166efbbe986"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a53195ca22b94707d321f2166efbbe986">mariOS_begin_periodic</a>&#160;&#160;&#160;do{</td></tr>
<tr class="separator:a53195ca22b94707d321f2166efbbe986"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9293d2ff598bc63c61d7003d7f1282e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#ac9293d2ff598bc63c61d7003d7f1282e">mariOS_end_periodic</a></td></tr>
<tr class="separator:ac9293d2ff598bc63c61d7003d7f1282e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a0e9e7935a080d32f806594571ee1f1d0"><td class="memItemLeft" align="right" valign="top">typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a0e9e7935a080d32f806594571ee1f1d0">mariOS_stack_t</a></td></tr>
<tr class="separator:a0e9e7935a080d32f806594571ee1f1d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf176d97d3dfba5ce3cce1e9b2db660f"><td class="memItemLeft" align="right" valign="top">typedef uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a></td></tr>
<tr class="separator:aaf176d97d3dfba5ce3cce1e9b2db660f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ecff202304f175f116b490195c8531b"><td class="memItemLeft" align="right" valign="top">typedef uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a7ecff202304f175f116b490195c8531b">mariOS_priority</a></td></tr>
<tr class="separator:a7ecff202304f175f116b490195c8531b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a2d398ecdf64ae2d69b62a370306d7e24"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a> { <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a> = 0, 
<a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191">MARIOS_TASK_STATUS_ACTIVE</a> = 1, 
<a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93">MARIOS_TASK_STATUS_WAIT</a> = -1, 
<a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a216cb44922759fc8cc53a1f53c8b2ab6">MARIOS_TASK_STATUS_SUSPEND</a> = 2
 }</td></tr>
<tr class="separator:a2d398ecdf64ae2d69b62a370306d7e24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a145925a06d731acd607bed860d7d57e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a145925a06d731acd607bed860d7d57e2">mariOS_init</a> (void)</td></tr>
<tr class="memdesc:a145925a06d731acd607bed860d7d57e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initialize the mariOS_tasks_list struct and populate it with the first task of the system, namely the idle one. For this reason, idle takes the threadID 0.  <a href="#a145925a06d731acd607bed860d7d57e2">More...</a><br /></td></tr>
<tr class="separator:a145925a06d731acd607bed860d7d57e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6424fee0e9b0f7e092556e8d00770052"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a6424fee0e9b0f7e092556e8d00770052">mariOS_task_init</a> (void(*handler)(void), uint32_t stack_size, <a class="el" href="mari_o_s_8h.html#a7ecff202304f175f116b490195c8531b">mariOS_priority</a> priority, uint32_t period)</td></tr>
<tr class="memdesc:a6424fee0e9b0f7e092556e8d00770052"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initialize a new entry in the tasks list. Actually, mariOS defines a task as a C function with no input/output parameters (properly, non returning/cyclic).The stack size has to be statically determined, taking into account the number of nesting function calling and related static-allocated data (which belongs to the task's stack).  <a href="#a6424fee0e9b0f7e092556e8d00770052">More...</a><br /></td></tr>
<tr class="separator:a6424fee0e9b0f7e092556e8d00770052"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74fd826d4eb7eee7307361c3c9a8a404"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a74fd826d4eb7eee7307361c3c9a8a404">mariOS_start</a> (uint32_t systick_ticks)</td></tr>
<tr class="memdesc:a74fd826d4eb7eee7307361c3c9a8a404"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function makes mariOS started, meant that the system's timer has to\ be configured accordingly to the mariOS defined sytick and the first task\ (the idle one) has to be loaded. Depending on the system target, some other configurations must be provided, especially those related to the interrupt controller, interrupt priority and additional driver configuration.  <a href="#a74fd826d4eb7eee7307361c3c9a8a404">More...</a><br /></td></tr>
<tr class="separator:a74fd826d4eb7eee7307361c3c9a8a404"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7b836592c7610e95c89ae7989b63d63"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#ab7b836592c7610e95c89ae7989b63d63">mariOS_scheduler</a> (void)</td></tr>
<tr class="memdesc:ab7b836592c7610e95c89ae7989b63d63"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function implements the mariOS's scheduler. The main aim is to get the current active task status to <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a> (mariOS_current_task), pick a task from the mariOS's tasks list and assign it to the mariOS_next_task, which is then set as <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a>.  <a href="#ab7b836592c7610e95c89ae7989b63d63">More...</a><br /></td></tr>
<tr class="separator:ab7b836592c7610e95c89ae7989b63d63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1ce5071a73faddfee5255c059bcde9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#aa1ce5071a73faddfee5255c059bcde9f">mariOS_task_yield</a> (void)</td></tr>
<tr class="memdesc:aa1ce5071a73faddfee5255c059bcde9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function implements the task yield, hence it gives to a task the possibility of a self-preemption for letting the scheduler pick another task. Hence, first, the function must call the scheduler, then it forces the system to call the yield, which forces the <a class="el" href="port_8h.html#a0eea14388b14c9e1baa3b040df2e243f" title="MariOS achieves the context switch by triggering the PendSV interrupt. For ARM architectures, PendSV is an interrupt-driven request for system-level service mainly used to completes the context switch. The function body is well documented. ">PendSV_Handler()</a> ISR whenever the scheduler picks a task different to the current active one.  <a href="#aa1ce5071a73faddfee5255c059bcde9f">More...</a><br /></td></tr>
<tr class="separator:aa1ce5071a73faddfee5255c059bcde9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8027dcd13880c2971f3627b052b481b3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a8027dcd13880c2971f3627b052b481b3">mariOS_delay</a> (uint32_t ticks)</td></tr>
<tr class="memdesc:a8027dcd13880c2971f3627b052b481b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function allows to switch the task status from <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191">MARIOS_TASK_STATUS_ACTIVE</a> to the <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93">MARIOS_TASK_STATUS_WAIT</a>. In particular, the function must record the time (expressed in mariOS ticks) on which the task status has to be switch to <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a>. Until the task status is <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93">MARIOS_TASK_STATUS_WAIT</a>, the scheduler cannot execute (mariOS does not admit task status transition from <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93">MARIOS_TASK_STATUS_WAIT</a> to <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191">MARIOS_TASK_STATUS_ACTIVE</a>).  <a href="#a8027dcd13880c2971f3627b052b481b3">More...</a><br /></td></tr>
<tr class="separator:a8027dcd13880c2971f3627b052b481b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62b1be2538fbcb50d26e830cc0b7a1d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a62b1be2538fbcb50d26e830cc0b7a1d8">mariOS_systick_handler</a> (void)</td></tr>
<tr class="memdesc:a62b1be2538fbcb50d26e830cc0b7a1d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function represents the core of mariOS. As a common implementation along RTOS projects, the systick handler must take care about main duties of the RTOS that must be performed periodically. A basic one comprehend the <a class="el" href="mari_o_s_8c.html#a71c7a8b0b0dde73caf6861d169769df8">mariOS_ticks</a> incrementing, the verification of which tasks that have the status <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93">MARIOS_TASK_STATUS_WAIT</a> must be switched as <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a> and, finally, the scheduler calling.  <a href="#a62b1be2538fbcb50d26e830cc0b7a1d8">More...</a><br /></td></tr>
<tr class="separator:a62b1be2538fbcb50d26e830cc0b7a1d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a203ea856aabbfe98ca3f54e1ce235ed5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a203ea856aabbfe98ca3f54e1ce235ed5">get_current_task_id</a> (void)</td></tr>
<tr class="memdesc:a203ea856aabbfe98ca3f54e1ce235ed5"><td class="mdescLeft">&#160;</td><td class="mdescRight">This accessory function returns the mariOS_task_id of the current active task.  <a href="#a203ea856aabbfe98ca3f54e1ce235ed5">More...</a><br /></td></tr>
<tr class="separator:a203ea856aabbfe98ca3f54e1ce235ed5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9464bc26366c37895638a04f5b4d7e5e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a9464bc26366c37895638a04f5b4d7e5e">set_current_task_status</a> (<a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a> status)</td></tr>
<tr class="memdesc:a9464bc26366c37895638a04f5b4d7e5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This accessory function configure the status of the current active task.  <a href="#a9464bc26366c37895638a04f5b4d7e5e">More...</a><br /></td></tr>
<tr class="separator:a9464bc26366c37895638a04f5b4d7e5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adad61ada0d646fc5395c0a1e3dc50919"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#adad61ada0d646fc5395c0a1e3dc50919">set_task_status</a> (<a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a> task_id, <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a> status)</td></tr>
<tr class="memdesc:adad61ada0d646fc5395c0a1e3dc50919"><td class="mdescLeft">&#160;</td><td class="mdescRight">This accessory function configure the status of the a task.  <a href="#adad61ada0d646fc5395c0a1e3dc50919">More...</a><br /></td></tr>
<tr class="separator:adad61ada0d646fc5395c0a1e3dc50919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72e631d3a2ed9e11836f0f1149ba65b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a72e631d3a2ed9e11836f0f1149ba65b2">get_current_task_status</a> (void)</td></tr>
<tr class="memdesc:a72e631d3a2ed9e11836f0f1149ba65b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">This accessory function returns the status of the current active task.  <a href="#a72e631d3a2ed9e11836f0f1149ba65b2">More...</a><br /></td></tr>
<tr class="separator:a72e631d3a2ed9e11836f0f1149ba65b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d4e0157eed613903bec74697a98b717"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a2d4e0157eed613903bec74697a98b717">get_current_task_period</a> (void)</td></tr>
<tr class="memdesc:a2d4e0157eed613903bec74697a98b717"><td class="mdescLeft">&#160;</td><td class="mdescRight">This accessory function returns the period of the current active task.  <a href="#a2d4e0157eed613903bec74697a98b717">More...</a><br /></td></tr>
<tr class="separator:a2d4e0157eed613903bec74697a98b717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a228860664d47f77e7b5b7195b0242021"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#a228860664d47f77e7b5b7195b0242021">get_task_status</a> (<a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a> task_id)</td></tr>
<tr class="memdesc:a228860664d47f77e7b5b7195b0242021"><td class="mdescLeft">&#160;</td><td class="mdescRight">This accessory function returns the status of a given task.  <a href="#a228860664d47f77e7b5b7195b0242021">More...</a><br /></td></tr>
<tr class="separator:a228860664d47f77e7b5b7195b0242021"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec5d00cc037e0a900dc097f8065b4d01"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mari_o_s_8h.html#aec5d00cc037e0a900dc097f8065b4d01">get_idle_percentage</a> (void)</td></tr>
<tr class="memdesc:aec5d00cc037e0a900dc097f8065b4d01"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns, in percentage, the idle of the processor.  <a href="#aec5d00cc037e0a900dc097f8065b4d01">More...</a><br /></td></tr>
<tr class="separator:aec5d00cc037e0a900dc097f8065b4d01"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file of main functionalities of mariOS. This file provides the mariOS task status enum, the definition of the task control block and public function for end users to manage the RTOS. </p>
<dl class="section author"><dt>Author</dt><dd>Mario Barbareschi <a href="#" onclick="location.href='mai'+'lto:'+'mar'+'io'+'.ba'+'rb'+'are'+'sc'+'hi@'+'un'+'ina'+'.i'+'t'; return false;">mario<span style="display: none;">.nosp@m.</span>.bar<span style="display: none;">.nosp@m.</span>bares<span style="display: none;">.nosp@m.</span>chi@<span style="display: none;">.nosp@m.</span>unina<span style="display: none;">.nosp@m.</span>.it</a> </dd></dl>
<dl class="section version"><dt>Version</dt><dd>V1.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>10-July-2018 </dd></dl>
<dl class="section attention"><dt>Attention</dt><dd></dd></dl>
<p>Copyright (C) 2018 Mario Barbareschi</p>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more details.</p>
<p>You should have received a copy of the GNU Affero General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a53195ca22b94707d321f2166efbbe986"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53195ca22b94707d321f2166efbbe986">&#9670;&nbsp;</a></span>mariOS_begin_periodic</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define mariOS_begin_periodic&#160;&#160;&#160;do{</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac9293d2ff598bc63c61d7003d7f1282e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9293d2ff598bc63c61d7003d7f1282e">&#9670;&nbsp;</a></span>mariOS_end_periodic</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define mariOS_end_periodic</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code" href="mari_o_s_8c.html#a711b8b2784a0430552465a537d24ef8a">mariOS_active_after</a>(<a class="code" href="mari_o_s_8h.html#a2d4e0157eed613903bec74697a98b717">get_current_task_period</a>());\</div><div class="line">                                                        }<span class="keywordflow">while</span> (1)</div><div class="ttc" id="mari_o_s_8c_html_a711b8b2784a0430552465a537d24ef8a"><div class="ttname"><a href="mari_o_s_8c.html#a711b8b2784a0430552465a537d24ef8a">mariOS_active_after</a></div><div class="ttdeci">void mariOS_active_after(uint32_t ticks)</div><div class="ttdef"><b>Definition:</b> mariOS.c:266</div></div>
<div class="ttc" id="mari_o_s_8h_html_a2d4e0157eed613903bec74697a98b717"><div class="ttname"><a href="mari_o_s_8h.html#a2d4e0157eed613903bec74697a98b717">get_current_task_period</a></div><div class="ttdeci">uint32_t get_current_task_period(void)</div><div class="ttdoc">This accessory function returns the period of the current active task. </div><div class="ttdef"><b>Definition:</b> mariOS.c:299</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad499e8ab44f02231c506648fd9dd5176"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad499e8ab44f02231c506648fd9dd5176">&#9670;&nbsp;</a></span>mariOS_Task</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define mariOS_Task</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">taskname</td><td>)</td>
          <td>&#160;&#160;&#160;static void taskname(void)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a7ecff202304f175f116b490195c8531b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ecff202304f175f116b490195c8531b">&#9670;&nbsp;</a></span>mariOS_priority</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint8_t <a class="el" href="mari_o_s_8h.html#a7ecff202304f175f116b490195c8531b">mariOS_priority</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0e9e7935a080d32f806594571ee1f1d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e9e7935a080d32f806594571ee1f1d0">&#9670;&nbsp;</a></span>mariOS_stack_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint32_t <a class="el" href="mari_o_s_8h.html#a0e9e7935a080d32f806594571ee1f1d0">mariOS_stack_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aaf176d97d3dfba5ce3cce1e9b2db660f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf176d97d3dfba5ce3cce1e9b2db660f">&#9670;&nbsp;</a></span>mariOS_task_id_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint16_t <a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a2d398ecdf64ae2d69b62a370306d7e24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d398ecdf64ae2d69b62a370306d7e24">&#9670;&nbsp;</a></span>mariOS_task_status_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The mariOS_task_status_t is the enumerative type that mariOS exploits for implemeting the scheduler. Actually, mariOS handles four different task status.</p>
<p><a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a> indicates that a task is ready to be scheduled, hence the scheduling algorithm can take it into consideration.</p>
<p><a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191">MARIOS_TASK_STATUS_ACTIVE</a> indicates that a taks is currently executing. As one can figure out, one and only one task a time takes the active status.</p>
<p><a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93">MARIOS_TASK_STATUS_WAIT</a> means that a task performed the mariOS_delay function for some ticks which have not yet been elapsing. In this status, a task cannot be scheduled as active.</p>
<p><a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a216cb44922759fc8cc53a1f53c8b2ab6">MARIOS_TASK_STATUS_SUSPEND</a> means that a task voluntary performed a yield due to a resource contest, such as sending/receiving to/from a queue. In this status, a task cannot be scheduled as active. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee"></a>MARIOS_TASK_STATUS_READY&#160;</td><td class="fielddoc"><p>Task is ready to be scheduled as active </p>
</td></tr>
<tr><td class="fieldname"><a id="a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191"></a>MARIOS_TASK_STATUS_ACTIVE&#160;</td><td class="fielddoc"><p>Task is currently being executed </p>
</td></tr>
<tr><td class="fieldname"><a id="a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93"></a>MARIOS_TASK_STATUS_WAIT&#160;</td><td class="fielddoc"><p>Task invoked the delay function </p>
</td></tr>
<tr><td class="fieldname"><a id="a2d398ecdf64ae2d69b62a370306d7e24a216cb44922759fc8cc53a1f53c8b2ab6"></a>MARIOS_TASK_STATUS_SUSPEND&#160;</td><td class="fielddoc"><p>Task invoked yield because a resource is busy or it does not exist yet </p>
</td></tr>
</table>
<div class="fragment"><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;{</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <a class="code" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a> = 0,   </div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <a class="code" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191">MARIOS_TASK_STATUS_ACTIVE</a> = 1,  </div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <a class="code" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93">MARIOS_TASK_STATUS_WAIT</a> = -1,   </div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <a class="code" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a216cb44922759fc8cc53a1f53c8b2ab6">MARIOS_TASK_STATUS_SUSPEND</a> = 2  </div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;} <a class="code" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a>;</div><div class="ttc" id="mari_o_s_8h_html_a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee"><div class="ttname"><a href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a></div><div class="ttdef"><b>Definition:</b> mariOS.h:75</div></div>
<div class="ttc" id="mari_o_s_8h_html_a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93"><div class="ttname"><a href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93">MARIOS_TASK_STATUS_WAIT</a></div><div class="ttdef"><b>Definition:</b> mariOS.h:77</div></div>
<div class="ttc" id="mari_o_s_8h_html_a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191"><div class="ttname"><a href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191">MARIOS_TASK_STATUS_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> mariOS.h:76</div></div>
<div class="ttc" id="mari_o_s_8h_html_a2d398ecdf64ae2d69b62a370306d7e24a216cb44922759fc8cc53a1f53c8b2ab6"><div class="ttname"><a href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a216cb44922759fc8cc53a1f53c8b2ab6">MARIOS_TASK_STATUS_SUSPEND</a></div><div class="ttdef"><b>Definition:</b> mariOS.h:78</div></div>
<div class="ttc" id="mari_o_s_8h_html_a2d398ecdf64ae2d69b62a370306d7e24"><div class="ttname"><a href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a></div><div class="ttdeci">mariOS_task_status_t</div><div class="ttdef"><b>Definition:</b> mariOS.h:73</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a203ea856aabbfe98ca3f54e1ce235ed5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a203ea856aabbfe98ca3f54e1ce235ed5">&#9670;&nbsp;</a></span>get_current_task_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a> get_current_task_id </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This accessory function returns the mariOS_task_id of the current active task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mariOS_task_id</td><td>of the current active task </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;{</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordflow">return</span> mariOS_tasks_list.current_active_task;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a2d4e0157eed613903bec74697a98b717"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d4e0157eed613903bec74697a98b717">&#9670;&nbsp;</a></span>get_current_task_period()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t get_current_task_period </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This accessory function returns the period of the current active task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mariOS_task_status of the current active task </dd></dl>
<div class="fragment"><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;{</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">return</span> mariOS_tasks_list.tasks[mariOS_tasks_list.current_active_task].period;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a72e631d3a2ed9e11836f0f1149ba65b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72e631d3a2ed9e11836f0f1149ba65b2">&#9670;&nbsp;</a></span>get_current_task_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a> get_current_task_status </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This accessory function returns the status of the current active task. </p>
<dl class="section warning"><dt>Warning</dt><dd>Currently, mariOS admits one and only one status when the task is running, namely <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191">MARIOS_TASK_STATUS_ACTIVE</a>. However, future extensions may plan more than one active status.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mariOS_task_status of the current active task </dd></dl>

<p class="reference">References <a class="el" href="mari_o_s_8c.html#a228860664d47f77e7b5b7195b0242021">get_task_status()</a>.</p>
<div class="fragment"><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;{</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mari_o_s_8c.html#a228860664d47f77e7b5b7195b0242021">get_task_status</a>(mariOS_tasks_list.current_active_task);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;}</div><div class="ttc" id="mari_o_s_8c_html_a228860664d47f77e7b5b7195b0242021"><div class="ttname"><a href="mari_o_s_8c.html#a228860664d47f77e7b5b7195b0242021">get_task_status</a></div><div class="ttdeci">mariOS_task_status_t get_task_status(mariOS_task_id_t task_id)</div><div class="ttdoc">This accessory function returns the status of a given task. </div><div class="ttdef"><b>Definition:</b> mariOS.c:294</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mari_o_s_8h_a72e631d3a2ed9e11836f0f1149ba65b2_cgraph.png" border="0" usemap="#mari_o_s_8h_a72e631d3a2ed9e11836f0f1149ba65b2_cgraph" alt=""/></div>
<map name="mari_o_s_8h_a72e631d3a2ed9e11836f0f1149ba65b2_cgraph" id="mari_o_s_8h_a72e631d3a2ed9e11836f0f1149ba65b2_cgraph">
<area shape="rect" id="node2" href="mari_o_s_8c.html#a228860664d47f77e7b5b7195b0242021" title="This accessory function returns the status of a given task. " alt="" coords="183,5,275,32"/>
</map>
</div>

</div>
</div>
<a id="aec5d00cc037e0a900dc097f8065b4d01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec5d00cc037e0a900dc097f8065b4d01">&#9670;&nbsp;</a></span>get_idle_percentage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t get_idle_percentage </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function returns, in percentage, the idle of the processor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the idle of the processor, between 0 and 100 </dd></dl>

<p class="reference">References <a class="el" href="mari_o_s_8c.html#a8a20b6886667469c4f71052a10f8389f">marios_idle_value</a>.</p>
<div class="fragment"><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                                 {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mari_o_s_8c.html#a8a20b6886667469c4f71052a10f8389f">marios_idle_value</a>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;}</div><div class="ttc" id="mari_o_s_8c_html_a8a20b6886667469c4f71052a10f8389f"><div class="ttname"><a href="mari_o_s_8c.html#a8a20b6886667469c4f71052a10f8389f">marios_idle_value</a></div><div class="ttdeci">volatile uint8_t marios_idle_value</div><div class="ttdef"><b>Definition:</b> mariOS.c:68</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a228860664d47f77e7b5b7195b0242021"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a228860664d47f77e7b5b7195b0242021">&#9670;&nbsp;</a></span>get_task_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a> get_task_status </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a>&#160;</td>
          <td class="paramname"><em>task_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This accessory function returns the status of a given task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">task_id</td><td>is the ID of the task </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mariOS_task_status of the task_id task </dd></dl>
<div class="fragment"><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;{</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">return</span> mariOS_tasks_list.tasks[task_id].status;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a8027dcd13880c2971f3627b052b481b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8027dcd13880c2971f3627b052b481b3">&#9670;&nbsp;</a></span>mariOS_delay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mariOS_delay </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ticks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function allows to switch the task status from <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191">MARIOS_TASK_STATUS_ACTIVE</a> to the <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93">MARIOS_TASK_STATUS_WAIT</a>. In particular, the function must record the time (expressed in mariOS ticks) on which the task status has to be switch to <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a>. Until the task status is <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93">MARIOS_TASK_STATUS_WAIT</a>, the scheduler cannot execute (mariOS does not admit task status transition from <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93">MARIOS_TASK_STATUS_WAIT</a> to <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191">MARIOS_TASK_STATUS_ACTIVE</a>). </p>
<p>Once the task status transition from <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191">MARIOS_TASK_STATUS_ACTIVE</a> to MARIOS_TASK_STATUS_WAIT completed, the function calls mariOS_task_yield to call the scheduler and perform a context switch.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ticks</td><td>represents the mariOS ticks that the scheduler must wait before taking into account the task when it is called. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="mari_o_s_8c.html#a711b8b2784a0430552465a537d24ef8a">mariOS_active_after()</a>, and <a class="el" href="mari_o_s__config_8h.html#a8f4745ef0e323da8f0ff381d84f06f3e">MARIOS_CONFIG_SYSTICK_FREQ_DIV</a>.</p>
<div class="fragment"><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                                    {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <a class="code" href="mari_o_s_8c.html#a711b8b2784a0430552465a537d24ef8a">mariOS_active_after</a>(<a class="code" href="mari_o_s__config_8h.html#a8f4745ef0e323da8f0ff381d84f06f3e">MARIOS_CONFIG_SYSTICK_FREQ_DIV</a>*millisec/1000);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;}</div><div class="ttc" id="mari_o_s__config_8h_html_a8f4745ef0e323da8f0ff381d84f06f3e"><div class="ttname"><a href="mari_o_s__config_8h.html#a8f4745ef0e323da8f0ff381d84f06f3e">MARIOS_CONFIG_SYSTICK_FREQ_DIV</a></div><div class="ttdeci">#define MARIOS_CONFIG_SYSTICK_FREQ_DIV</div><div class="ttdef"><b>Definition:</b> mariOS_config.h:38</div></div>
<div class="ttc" id="mari_o_s_8c_html_a711b8b2784a0430552465a537d24ef8a"><div class="ttname"><a href="mari_o_s_8c.html#a711b8b2784a0430552465a537d24ef8a">mariOS_active_after</a></div><div class="ttdeci">void mariOS_active_after(uint32_t ticks)</div><div class="ttdef"><b>Definition:</b> mariOS.c:266</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mari_o_s_8h_a8027dcd13880c2971f3627b052b481b3_cgraph.png" border="0" usemap="#mari_o_s_8h_a8027dcd13880c2971f3627b052b481b3_cgraph" alt=""/></div>
<map name="mari_o_s_8h_a8027dcd13880c2971f3627b052b481b3_cgraph" id="mari_o_s_8h_a8027dcd13880c2971f3627b052b481b3_cgraph">
<area shape="rect" id="node2" href="mari_o_s_8c.html#a711b8b2784a0430552465a537d24ef8a" title="mariOS_active_after" alt="" coords="139,5,252,32"/>
<area shape="rect" id="node3" href="port_8c.html#a22857ed9823f022f5988f9afdbb8994e" title="The function enter_critical_section must guarantee that no other task can access shared resources of ..." alt="" coords="300,5,416,32"/>
</map>
</div>

</div>
</div>
<a id="a145925a06d731acd607bed860d7d57e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a145925a06d731acd607bed860d7d57e2">&#9670;&nbsp;</a></span>mariOS_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mariOS_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function initialize the mariOS_tasks_list struct and populate it with the first task of the system, namely the idle one. For this reason, idle takes the threadID 0. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>Current idle process implementation does not need a lot of space, even though its minimum size depends on the target architecture.</p>
<div class="fragment"><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        memset(&amp;mariOS_tasks_list, 0, <span class="keyword">sizeof</span>(mariOS_tasks_list));</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <a class="code" href="mari_o_s_8c.html#a71c7a8b0b0dde73caf6861d169769df8">mariOS_ticks</a> = 0;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <a class="code" href="mari_o_s_8c.html#a6424fee0e9b0f7e092556e8d00770052">mariOS_task_init</a>(mariOS_idle, <a class="code" href="mari_o_s__config_8h.html#a51fe4db32a22ed712a0ff977b2f08dbd">MARIOS_IDLE_TASK_STACK</a>, 0, 0);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div><div class="ttc" id="mari_o_s_8c_html_a71c7a8b0b0dde73caf6861d169769df8"><div class="ttname"><a href="mari_o_s_8c.html#a71c7a8b0b0dde73caf6861d169769df8">mariOS_ticks</a></div><div class="ttdeci">volatile uint32_t mariOS_ticks</div><div class="ttdef"><b>Definition:</b> mariOS.c:53</div></div>
<div class="ttc" id="mari_o_s__config_8h_html_a51fe4db32a22ed712a0ff977b2f08dbd"><div class="ttname"><a href="mari_o_s__config_8h.html#a51fe4db32a22ed712a0ff977b2f08dbd">MARIOS_IDLE_TASK_STACK</a></div><div class="ttdeci">#define MARIOS_IDLE_TASK_STACK</div><div class="ttdef"><b>Definition:</b> mariOS_config.h:41</div></div>
<div class="ttc" id="mari_o_s_8c_html_a6424fee0e9b0f7e092556e8d00770052"><div class="ttname"><a href="mari_o_s_8c.html#a6424fee0e9b0f7e092556e8d00770052">mariOS_task_init</a></div><div class="ttdeci">mariOS_task_id_t mariOS_task_init(void(*handler)(void), uint32_t stack_size, mariOS_priority priority, uint32_t period)</div><div class="ttdoc">This function initialize a new entry in the tasks list. Actually, mariOS defines a task as a C functi...</div><div class="ttdef"><b>Definition:</b> mariOS.c:117</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab7b836592c7610e95c89ae7989b63d63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7b836592c7610e95c89ae7989b63d63">&#9670;&nbsp;</a></span>mariOS_scheduler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mariOS_scheduler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function implements the mariOS's scheduler. The main aim is to get the current active task status to <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a> (mariOS_current_task), pick a task from the mariOS's tasks list and assign it to the mariOS_next_task, which is then set as <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a>. </p>
<p>Currently, the scheduler implementation is just a round robin, hence the scheduler picks the task next to the current one in the mariOS tasks list. Obviously, a more sophisticated implementation is feasible, but maybe the <a class="el" href="structmari_o_s__task__control__block__t.html" title="This struct defines the mariOS task control block. It contains the task stack pointer, the function pointer to the task implementation, the task status, the last time it has been scheduled as active, the number of ticks that the mariOS system tick has to reach to switch its status from MARIOS_TASK_STATUS_WAIT to MARIOS_TASK_STATUS_READY. ">mariOS_task_control_block_t</a> should be enriched with further information.</p>
<p>Most important aspect, which does not depend on specific implementation of scheduler, is the existance of the mariOS_idle task. Indded, each time the scheduler is not able to determine a task to be executed, it should pick the mariOS_idle task instead. In other words, the mariOS_idle task is the least priority task of the system, matching the general meaing of the idle task.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>Retrieve the current active task</p>
<p>If it is active, namely it has been set neither in wait nor suspend, its status must be changed in ready</p>
<p>Now, we need to pick the next task: </p>
<div class="fragment"><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;{</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <a class="code" href="mari_o_s_8c.html#a456302edfb33428bf0790e4a5f3de535">mariOS_curr_task</a> = &amp;mariOS_tasks_list.tasks[mariOS_tasks_list.current_active_task];</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191">MARIOS_TASK_STATUS_ACTIVE</a> == <a class="code" href="mari_o_s_8c.html#a456302edfb33428bf0790e4a5f3de535">mariOS_curr_task</a>-&gt;<a class="code" href="structmari_o_s__task__control__block__t.html#a5082b84f19bfae639ede5668f9ea48cc">status</a>)</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                <a class="code" href="mari_o_s_8c.html#a456302edfb33428bf0790e4a5f3de535">mariOS_curr_task</a>-&gt;<a class="code" href="structmari_o_s__task__control__block__t.html#a5082b84f19bfae639ede5668f9ea48cc">status</a> = <a class="code" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a>;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="mari_o_s__config_8h.html#a298b1881468fec7e1b8f11f9c584d6d8">MARIOS_SCHEDULER_FUNCTION</a>();</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <a class="code" href="mari_o_s_8c.html#a1c480cf3a674d330111128b1d7be8783">mariOS_next_task</a> = &amp;mariOS_tasks_list.tasks[mariOS_tasks_list.current_active_task];</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <a class="code" href="mari_o_s_8c.html#a1c480cf3a674d330111128b1d7be8783">mariOS_next_task</a>-&gt;<a class="code" href="structmari_o_s__task__control__block__t.html#a5082b84f19bfae639ede5668f9ea48cc">status</a> = <a class="code" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191">MARIOS_TASK_STATUS_ACTIVE</a>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;}</div><div class="ttc" id="mari_o_s_8h_html_a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee"><div class="ttname"><a href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a></div><div class="ttdef"><b>Definition:</b> mariOS.h:75</div></div>
<div class="ttc" id="mari_o_s__config_8h_html_a298b1881468fec7e1b8f11f9c584d6d8"><div class="ttname"><a href="mari_o_s__config_8h.html#a298b1881468fec7e1b8f11f9c584d6d8">MARIOS_SCHEDULER_FUNCTION</a></div><div class="ttdeci">#define MARIOS_SCHEDULER_FUNCTION</div><div class="ttdef"><b>Definition:</b> mariOS_config.h:45</div></div>
<div class="ttc" id="mari_o_s_8h_html_a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191"><div class="ttname"><a href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191">MARIOS_TASK_STATUS_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> mariOS.h:76</div></div>
<div class="ttc" id="structmari_o_s__task__control__block__t_html_a5082b84f19bfae639ede5668f9ea48cc"><div class="ttname"><a href="structmari_o_s__task__control__block__t.html#a5082b84f19bfae639ede5668f9ea48cc">mariOS_task_control_block_t::status</a></div><div class="ttdeci">volatile mariOS_task_status_t status</div><div class="ttdef"><b>Definition:</b> mariOS.h:100</div></div>
<div class="ttc" id="mari_o_s_8c_html_a1c480cf3a674d330111128b1d7be8783"><div class="ttname"><a href="mari_o_s_8c.html#a1c480cf3a674d330111128b1d7be8783">mariOS_next_task</a></div><div class="ttdeci">mariOS_task_control_block_t *volatile mariOS_next_task</div><div class="ttdef"><b>Definition:</b> mariOS.c:61</div></div>
<div class="ttc" id="mari_o_s_8c_html_a456302edfb33428bf0790e4a5f3de535"><div class="ttname"><a href="mari_o_s_8c.html#a456302edfb33428bf0790e4a5f3de535">mariOS_curr_task</a></div><div class="ttdeci">mariOS_task_control_block_t *volatile mariOS_curr_task</div><div class="ttdef"><b>Definition:</b> mariOS.c:60</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a74fd826d4eb7eee7307361c3c9a8a404"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74fd826d4eb7eee7307361c3c9a8a404">&#9670;&nbsp;</a></span>mariOS_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mariOS_start </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>systick_ticks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function makes mariOS started, meant that the system's timer has to\ be configured accordingly to the mariOS defined sytick and the first task\ (the idle one) has to be loaded. Depending on the system target, some other configurations must be provided, especially those related to the interrupt controller, interrupt priority and additional driver configuration. </p>
<dl class="section note"><dt>Note</dt><dd>Even though this function is declared to return an integer value, it should never return since the first task has to be scheduled before reaching the end of the function.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">systick_ticks</td><td>is the number of last_active_time's ticks between two interruption events </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None.</td><td>The function is declared for returning an integer, but this function should never return </td></tr>
  </table>
  </dd>
</dl>
<p>This point should be never reached </p>

<p class="reference">References <a class="el" href="port_8c.html#a733949d55467f26805cac11130a0e667">configureSystick()</a>.</p>
<div class="fragment"><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;{</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="port_8c.html#a733949d55467f26805cac11130a0e667">configureSystick</a>(systick_ticks);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="comment">/* Start the first task: should be the first non-idle */</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <a class="code" href="mari_o_s_8c.html#a456302edfb33428bf0790e4a5f3de535">mariOS_curr_task</a> = &amp;mariOS_tasks_list.tasks[mariOS_tasks_list.current_active_task];</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <a class="code" href="port_8c.html#a84380d5a78e52a1ea7176177e2e62c70">loadFirstTask</a>();</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div><div class="ttc" id="port_8c_html_a84380d5a78e52a1ea7176177e2e62c70"><div class="ttname"><a href="port_8c.html#a84380d5a78e52a1ea7176177e2e62c70">loadFirstTask</a></div><div class="ttdeci">void loadFirstTask()</div><div class="ttdoc">Once the system is configured and ready for executing the user application, we need to get back a pri...</div><div class="ttdef"><b>Definition:</b> port.c:37</div></div>
<div class="ttc" id="mari_o_s_8c_html_a456302edfb33428bf0790e4a5f3de535"><div class="ttname"><a href="mari_o_s_8c.html#a456302edfb33428bf0790e4a5f3de535">mariOS_curr_task</a></div><div class="ttdeci">mariOS_task_control_block_t *volatile mariOS_curr_task</div><div class="ttdef"><b>Definition:</b> mariOS.c:60</div></div>
<div class="ttc" id="port_8c_html_a733949d55467f26805cac11130a0e667"><div class="ttname"><a href="port_8c.html#a733949d55467f26805cac11130a0e667">configureSystick</a></div><div class="ttdeci">int configureSystick(uint32_t systick_ticks)</div><div class="ttdoc">The configureSystick function hides the main mechanism on which an RTOS is based, that is periodic in...</div><div class="ttdef"><b>Definition:</b> port.c:162</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mari_o_s_8h_a74fd826d4eb7eee7307361c3c9a8a404_cgraph.png" border="0" usemap="#mari_o_s_8h_a74fd826d4eb7eee7307361c3c9a8a404_cgraph" alt=""/></div>
<map name="mari_o_s_8h_a74fd826d4eb7eee7307361c3c9a8a404_cgraph" id="mari_o_s_8h_a74fd826d4eb7eee7307361c3c9a8a404_cgraph">
<area shape="rect" id="node2" href="port_8c.html#a733949d55467f26805cac11130a0e667" title="The configureSystick function hides the main mechanism on which an RTOS is based, that is periodic in..." alt="" coords="135,5,229,32"/>
</map>
</div>

</div>
</div>
<a id="a62b1be2538fbcb50d26e830cc0b7a1d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62b1be2538fbcb50d26e830cc0b7a1d8">&#9670;&nbsp;</a></span>mariOS_systick_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mariOS_systick_handler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function represents the core of mariOS. As a common implementation along RTOS projects, the systick handler must take care about main duties of the RTOS that must be performed periodically. A basic one comprehend the <a class="el" href="mari_o_s_8c.html#a71c7a8b0b0dde73caf6861d169769df8">mariOS_ticks</a> incrementing, the verification of which tasks that have the status <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24a0c987ff1803a828918d4256e5ced9f93">MARIOS_TASK_STATUS_WAIT</a> must be switched as <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a> and, finally, the scheduler calling. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6424fee0e9b0f7e092556e8d00770052"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6424fee0e9b0f7e092556e8d00770052">&#9670;&nbsp;</a></span>mariOS_task_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a> mariOS_task_init </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>stack_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mari_o_s_8h.html#a7ecff202304f175f116b490195c8531b">mariOS_priority</a>&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>period</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function initialize a new entry in the tasks list. Actually, mariOS defines a task as a C function with no input/output parameters (properly, non returning/cyclic).The stack size has to be statically determined, taking into account the number of nesting function calling and related static-allocated data (which belongs to the task's stack). </p>
<p>Status of each created task is set to MARIOS_TASK_STATUS_READY, meant that the scheduler may pick it to be the current executed task, setting it to the status <a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ab6c81fb28f66210779d61950f1969191">MARIOS_TASK_STATUS_ACTIVE</a>.</p>
<p>MariOS tasks are defined with a priority, which can be potentially used by the scheduling algorithm</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handler</td><td>is the function pointer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stack_size</td><td>decides the size of the task's stack </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">priority</td><td>is the priority value assigned to the task </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">period</td><td>is the period value (in milliseconds) assigned to the task </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>The taskID of tasks starts from 0, while mariOS_idle does not have any ID, even though its index is 0 </p>
<div class="fragment"><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;{</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keywordflow">if</span> (mariOS_tasks_list.size &gt;= <a class="code" href="mari_o_s__config_8h.html#af930526d08eb3382941b13342f41bf10">MARIOS_CONFIG_MAX_TASKS</a>-1)</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="comment">/* Initialize the task structure and set SP to the top of the stack</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">           minus 16 words (64 bytes) to leave space for storing 16 registers: */</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <a class="code" href="structmari_o_s__task__control__block__t.html">mariOS_task_control_block_t</a> *p_task = &amp;mariOS_tasks_list.tasks[mariOS_tasks_list.size];</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        p_task-&gt;<a class="code" href="structmari_o_s__task__control__block__t.html#aeb1704a2fb24ba595dccffc4821781df">handler</a> = handler;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="mari_o_s__config_8h.html#ad837efe163e90a0db9f2ddb5a01c63a3">MARIOS_MINIMUM_TASK_STACK_SIZE</a> &gt;= stack_size)</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                stack_size = <a class="code" href="mari_o_s__config_8h.html#ad837efe163e90a0db9f2ddb5a01c63a3">MARIOS_MINIMUM_TASK_STACK_SIZE</a>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <a class="code" href="mari_o_s_8h.html#a0e9e7935a080d32f806594571ee1f1d0">mariOS_stack_t</a> *p_stack = malloc(stack_size*<span class="keyword">sizeof</span>(<a class="code" href="mari_o_s_8h.html#a0e9e7935a080d32f806594571ee1f1d0">mariOS_stack_t</a>));</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        p_task-&gt;<a class="code" href="structmari_o_s__task__control__block__t.html#ae19a9b5abedc608ed8d44ae0650e96e7">sp</a> = (uint32_t)(p_stack+stack_size-16);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        p_task-&gt;<a class="code" href="structmari_o_s__task__control__block__t.html#a5082b84f19bfae639ede5668f9ea48cc">status</a> = <a class="code" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        p_task-&gt;<a class="code" href="structmari_o_s__task__control__block__t.html#a4f07498dc634fa2fed02461ecd5dda57">wait_ticks</a> = 0;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        p_task-&gt;<a class="code" href="structmari_o_s__task__control__block__t.html#aee8c6361f9c9cc1fe103231624d487aa">priority</a> = priority;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        p_task-&gt;<a class="code" href="structmari_o_s__task__control__block__t.html#a1e88ac89898193820afbf9c09d7462e5">period</a> = <a class="code" href="mari_o_s__config_8h.html#a8f4745ef0e323da8f0ff381d84f06f3e">MARIOS_CONFIG_SYSTICK_FREQ_DIV</a>*period/1000;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="comment">/* Here some special registers are defined and they  will be restored on exception return, namely:</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">           - XPSR: Default value (0x01000000)</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">           - PC: Point to the handler function</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">           - LR: Point to a function to be called when the handler returns */</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        p_stack[stack_size-1] = 0x01000000;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        p_stack[stack_size-2] = (uint32_t)handler;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        p_stack[stack_size-3] = (uint32_t) &amp;task_completion;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        mariOS_tasks_list.size++;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">return</span> (mariOS_tasks_list.size-1);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div><div class="ttc" id="mari_o_s__config_8h_html_a8f4745ef0e323da8f0ff381d84f06f3e"><div class="ttname"><a href="mari_o_s__config_8h.html#a8f4745ef0e323da8f0ff381d84f06f3e">MARIOS_CONFIG_SYSTICK_FREQ_DIV</a></div><div class="ttdeci">#define MARIOS_CONFIG_SYSTICK_FREQ_DIV</div><div class="ttdef"><b>Definition:</b> mariOS_config.h:38</div></div>
<div class="ttc" id="structmari_o_s__task__control__block__t_html"><div class="ttname"><a href="structmari_o_s__task__control__block__t.html">mariOS_task_control_block_t</a></div><div class="ttdoc">This struct defines the mariOS task control block. It contains the task stack pointer, the function pointer to the task implementation, the task status, the last time it has been scheduled as active, the number of ticks that the mariOS system tick has to reach to switch its status from MARIOS_TASK_STATUS_WAIT to MARIOS_TASK_STATUS_READY. </div><div class="ttdef"><b>Definition:</b> mariOS.h:92</div></div>
<div class="ttc" id="mari_o_s_8h_html_a0e9e7935a080d32f806594571ee1f1d0"><div class="ttname"><a href="mari_o_s_8h.html#a0e9e7935a080d32f806594571ee1f1d0">mariOS_stack_t</a></div><div class="ttdeci">uint32_t mariOS_stack_t</div><div class="ttdef"><b>Definition:</b> mariOS.h:43</div></div>
<div class="ttc" id="structmari_o_s__task__control__block__t_html_aeb1704a2fb24ba595dccffc4821781df"><div class="ttname"><a href="structmari_o_s__task__control__block__t.html#aeb1704a2fb24ba595dccffc4821781df">mariOS_task_control_block_t::handler</a></div><div class="ttdeci">void(* handler)(void)</div><div class="ttdef"><b>Definition:</b> mariOS.h:99</div></div>
<div class="ttc" id="mari_o_s_8h_html_a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee"><div class="ttname"><a href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24ac83fa038516851eae6fd8e56221af5ee">MARIOS_TASK_STATUS_READY</a></div><div class="ttdef"><b>Definition:</b> mariOS.h:75</div></div>
<div class="ttc" id="structmari_o_s__task__control__block__t_html_a1e88ac89898193820afbf9c09d7462e5"><div class="ttname"><a href="structmari_o_s__task__control__block__t.html#a1e88ac89898193820afbf9c09d7462e5">mariOS_task_control_block_t::period</a></div><div class="ttdeci">volatile uint32_t period</div><div class="ttdef"><b>Definition:</b> mariOS.h:105</div></div>
<div class="ttc" id="structmari_o_s__task__control__block__t_html_ae19a9b5abedc608ed8d44ae0650e96e7"><div class="ttname"><a href="structmari_o_s__task__control__block__t.html#ae19a9b5abedc608ed8d44ae0650e96e7">mariOS_task_control_block_t::sp</a></div><div class="ttdeci">volatile uint32_t sp</div><div class="ttdef"><b>Definition:</b> mariOS.h:98</div></div>
<div class="ttc" id="mari_o_s__config_8h_html_af930526d08eb3382941b13342f41bf10"><div class="ttname"><a href="mari_o_s__config_8h.html#af930526d08eb3382941b13342f41bf10">MARIOS_CONFIG_MAX_TASKS</a></div><div class="ttdeci">#define MARIOS_CONFIG_MAX_TASKS</div><div class="ttdef"><b>Definition:</b> mariOS_config.h:36</div></div>
<div class="ttc" id="structmari_o_s__task__control__block__t_html_a5082b84f19bfae639ede5668f9ea48cc"><div class="ttname"><a href="structmari_o_s__task__control__block__t.html#a5082b84f19bfae639ede5668f9ea48cc">mariOS_task_control_block_t::status</a></div><div class="ttdeci">volatile mariOS_task_status_t status</div><div class="ttdef"><b>Definition:</b> mariOS.h:100</div></div>
<div class="ttc" id="structmari_o_s__task__control__block__t_html_a4f07498dc634fa2fed02461ecd5dda57"><div class="ttname"><a href="structmari_o_s__task__control__block__t.html#a4f07498dc634fa2fed02461ecd5dda57">mariOS_task_control_block_t::wait_ticks</a></div><div class="ttdeci">volatile uint32_t wait_ticks</div><div class="ttdef"><b>Definition:</b> mariOS.h:103</div></div>
<div class="ttc" id="mari_o_s__config_8h_html_ad837efe163e90a0db9f2ddb5a01c63a3"><div class="ttname"><a href="mari_o_s__config_8h.html#ad837efe163e90a0db9f2ddb5a01c63a3">MARIOS_MINIMUM_TASK_STACK_SIZE</a></div><div class="ttdeci">#define MARIOS_MINIMUM_TASK_STACK_SIZE</div><div class="ttdef"><b>Definition:</b> mariOS_config.h:42</div></div>
<div class="ttc" id="structmari_o_s__task__control__block__t_html_aee8c6361f9c9cc1fe103231624d487aa"><div class="ttname"><a href="structmari_o_s__task__control__block__t.html#aee8c6361f9c9cc1fe103231624d487aa">mariOS_task_control_block_t::priority</a></div><div class="ttdeci">volatile mariOS_priority priority</div><div class="ttdef"><b>Definition:</b> mariOS.h:104</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa1ce5071a73faddfee5255c059bcde9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1ce5071a73faddfee5255c059bcde9f">&#9670;&nbsp;</a></span>mariOS_task_yield()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mariOS_task_yield </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function implements the task yield, hence it gives to a task the possibility of a self-preemption for letting the scheduler pick another task. Hence, first, the function must call the scheduler, then it forces the system to call the yield, which forces the <a class="el" href="port_8h.html#a0eea14388b14c9e1baa3b040df2e243f" title="MariOS achieves the context switch by triggering the PendSV interrupt. For ARM architectures, PendSV is an interrupt-driven request for system-level service mainly used to completes the context switch. The function body is well documented. ">PendSV_Handler()</a> ISR whenever the scheduler picks a task different to the current active one. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>Actually, we are triggering the activation of the <a class="el" href="port_8h.html#a0eea14388b14c9e1baa3b040df2e243f" title="MariOS achieves the context switch by triggering the PendSV interrupt. For ARM architectures, PendSV is an interrupt-driven request for system-level service mainly used to completes the context switch. The function body is well documented. ">PendSV_Handler()</a> </p>

<p class="reference">References <a class="el" href="structmari_o_s__task__control__block__t.html#a93580aea075f624b92de8f36a7811927">mariOS_task_control_block_t::last_active_time</a>, <a class="el" href="mari_o_s_8c.html#ab7b836592c7610e95c89ae7989b63d63">mariOS_scheduler()</a>, <a class="el" href="mari_o_s_8c.html#a71c7a8b0b0dde73caf6861d169769df8">mariOS_ticks</a>, and <a class="el" href="port_8c.html#a58c8b2ad0ea491a6642e5e1cbd358c89">yield()</a>.</p>
<div class="fragment"><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;{</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <a class="code" href="mari_o_s_8c.html#ab7b836592c7610e95c89ae7989b63d63">mariOS_scheduler</a>();</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <a class="code" href="mari_o_s_8c.html#a1c480cf3a674d330111128b1d7be8783">mariOS_next_task</a>-&gt;<a class="code" href="structmari_o_s__task__control__block__t.html#a93580aea075f624b92de8f36a7811927">last_active_time</a> = <a class="code" href="mari_o_s_8c.html#a71c7a8b0b0dde73caf6861d169769df8">mariOS_ticks</a>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="mari_o_s_8c.html#a1c480cf3a674d330111128b1d7be8783">mariOS_next_task</a> != <a class="code" href="mari_o_s_8c.html#a456302edfb33428bf0790e4a5f3de535">mariOS_curr_task</a>)</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                <a class="code" href="port_8c.html#a58c8b2ad0ea491a6642e5e1cbd358c89">yield</a>(); </div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        }</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;}</div><div class="ttc" id="mari_o_s_8c_html_a71c7a8b0b0dde73caf6861d169769df8"><div class="ttname"><a href="mari_o_s_8c.html#a71c7a8b0b0dde73caf6861d169769df8">mariOS_ticks</a></div><div class="ttdeci">volatile uint32_t mariOS_ticks</div><div class="ttdef"><b>Definition:</b> mariOS.c:53</div></div>
<div class="ttc" id="port_8c_html_a58c8b2ad0ea491a6642e5e1cbd358c89"><div class="ttname"><a href="port_8c.html#a58c8b2ad0ea491a6642e5e1cbd358c89">yield</a></div><div class="ttdeci">void yield()</div><div class="ttdoc">Whenever the scheduler wants to remove the current task in favor of another task, it can explicitly c...</div><div class="ttdef"><b>Definition:</b> port.c:147</div></div>
<div class="ttc" id="mari_o_s_8c_html_a1c480cf3a674d330111128b1d7be8783"><div class="ttname"><a href="mari_o_s_8c.html#a1c480cf3a674d330111128b1d7be8783">mariOS_next_task</a></div><div class="ttdeci">mariOS_task_control_block_t *volatile mariOS_next_task</div><div class="ttdef"><b>Definition:</b> mariOS.c:61</div></div>
<div class="ttc" id="mari_o_s_8c_html_a456302edfb33428bf0790e4a5f3de535"><div class="ttname"><a href="mari_o_s_8c.html#a456302edfb33428bf0790e4a5f3de535">mariOS_curr_task</a></div><div class="ttdeci">mariOS_task_control_block_t *volatile mariOS_curr_task</div><div class="ttdef"><b>Definition:</b> mariOS.c:60</div></div>
<div class="ttc" id="mari_o_s_8c_html_ab7b836592c7610e95c89ae7989b63d63"><div class="ttname"><a href="mari_o_s_8c.html#ab7b836592c7610e95c89ae7989b63d63">mariOS_scheduler</a></div><div class="ttdeci">void mariOS_scheduler(void)</div><div class="ttdoc">This function implements the mariOS&amp;#39;s scheduler. The main aim is to get the current active task statu...</div><div class="ttdef"><b>Definition:</b> mariOS.c:246</div></div>
<div class="ttc" id="structmari_o_s__task__control__block__t_html_a93580aea075f624b92de8f36a7811927"><div class="ttname"><a href="structmari_o_s__task__control__block__t.html#a93580aea075f624b92de8f36a7811927">mariOS_task_control_block_t::last_active_time</a></div><div class="ttdeci">volatile uint32_t last_active_time</div><div class="ttdef"><b>Definition:</b> mariOS.h:101</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mari_o_s_8h_aa1ce5071a73faddfee5255c059bcde9f_cgraph.png" border="0" usemap="#mari_o_s_8h_aa1ce5071a73faddfee5255c059bcde9f_cgraph" alt=""/></div>
<map name="mari_o_s_8h_aa1ce5071a73faddfee5255c059bcde9f_cgraph" id="mari_o_s_8h_aa1ce5071a73faddfee5255c059bcde9f_cgraph">
<area shape="rect" id="node2" href="mari_o_s_8c.html#ab7b836592c7610e95c89ae7989b63d63" title="This function implements the mariOS&#39;s scheduler. The main aim is to get the current active task statu..." alt="" coords="159,5,264,32"/>
<area shape="rect" id="node3" href="port_8c.html#a58c8b2ad0ea491a6642e5e1cbd358c89" title="Whenever the scheduler wants to remove the current task in favor of another task, it can explicitly c..." alt="" coords="190,56,233,83"/>
</map>
</div>

</div>
</div>
<a id="a9464bc26366c37895638a04f5b4d7e5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9464bc26366c37895638a04f5b4d7e5e">&#9670;&nbsp;</a></span>set_current_task_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_current_task_status </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a>&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This accessory function configure the status of the current active task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>is the new status of current active task </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="mari_o_s_8c.html#adad61ada0d646fc5395c0a1e3dc50919">set_task_status()</a>.</p>
<div class="fragment"><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;{</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <a class="code" href="mari_o_s_8c.html#adad61ada0d646fc5395c0a1e3dc50919">set_task_status</a>(mariOS_tasks_list.current_active_task, status);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;}</div><div class="ttc" id="mari_o_s_8c_html_adad61ada0d646fc5395c0a1e3dc50919"><div class="ttname"><a href="mari_o_s_8c.html#adad61ada0d646fc5395c0a1e3dc50919">set_task_status</a></div><div class="ttdeci">void set_task_status(mariOS_task_id_t task_id, mariOS_task_status_t status)</div><div class="ttdoc">This accessory function configure the status of the a task. </div><div class="ttdef"><b>Definition:</b> mariOS.c:289</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mari_o_s_8h_a9464bc26366c37895638a04f5b4d7e5e_cgraph.png" border="0" usemap="#mari_o_s_8h_a9464bc26366c37895638a04f5b4d7e5e_cgraph" alt=""/></div>
<map name="mari_o_s_8h_a9464bc26366c37895638a04f5b4d7e5e_cgraph" id="mari_o_s_8h_a9464bc26366c37895638a04f5b4d7e5e_cgraph">
<area shape="rect" id="node2" href="mari_o_s_8c.html#adad61ada0d646fc5395c0a1e3dc50919" title="This accessory function configure the status of the a task. " alt="" coords="181,5,273,32"/>
</map>
</div>

</div>
</div>
<a id="adad61ada0d646fc5395c0a1e3dc50919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adad61ada0d646fc5395c0a1e3dc50919">&#9670;&nbsp;</a></span>set_task_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_task_status </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mari_o_s_8h.html#aaf176d97d3dfba5ce3cce1e9b2db660f">mariOS_task_id_t</a>&#160;</td>
          <td class="paramname"><em>task_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mari_o_s_8h.html#a2d398ecdf64ae2d69b62a370306d7e24">mariOS_task_status_t</a>&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This accessory function configure the status of the a task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">task_id</td><td>is the id of the task to modify </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>is the new status of current active task </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;{</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        mariOS_tasks_list.tasks[task_id].status = status;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jan 22 2019 16:58:31 for mariOS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
